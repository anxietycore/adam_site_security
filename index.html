<!DOCTYPE html>
<html lang="ru">
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M30NK9KWVH"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-M30NK9KWVH');
</script>
<head>
    <meta charset="UTF-8">
    <title>A.D.A.M. // ТЕРМИНАЛ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Fullscreen WebGL canvas (фон) -->
    <canvas id="shader-canvas" aria-hidden="true"></canvas>
    
    <div class="scanline"></div>

    <!-- Содержимое сайта (оставлено как у тебя) -->
    <!-- ЭПИЧНЫЙ КОСМИЧЕСКИЙ ПОРТАЛ — теперь удалённые декоративные div'ы, фон рисует шейдер -->
    
    <!-- Экран запуска -->
    <div id="start-screen">
        <div class="start-message">
            <div class="logo">
                <pre>
    \    _ \    \     \  | 
   _ \   |  |  _ \   |\/ | 
 _/  _\ ___/ _/  _\ _|  _| 
                </pre>
            </div>
            <p>> СИСТЕМА A.D.A.M. ГОТОВА К ЗАПУСКУ</p>
            <button id="start-btn">ЗАПУСТИТЬ СИСТЕМУ</button>
        </div>
    </div>
    
    <!-- Экран загрузки -->
    <div id="boot-screen" class="hidden">
        <div class="boot-message">
            <div class="logo">
                <pre>
    \    _ \    \     \  | 
   _ \   |  |  _ \   |\/ | 
 _/  _\ ___/ _/  _\ _|  _| 
                </pre>
            </div>
            <div class="boot-text">
                <p>> ИНИЦИАЛИЗАЦИЯ ПРОТОКОЛА БЕЗОПАСНОСТИ A.D.A.M...</p>
                <p>> ЗАГРУЗКА ПОДСИСТЕМЫ VIGIL-9...</p>
                <p>> ТЕСТ ПАМЯТИ: УСПЕШНО</p>
                <p>> КРИПТОМОДУЛЬ: АКТИВИРОВАН</p>
                <p>> ПРЕДУПРЕЖДЕНИЕ: НЕСАНКЦИОНИРОВАННЫЙ ДОСТУП ЗАПРЕЩЁН</p>
                <p>> СИСТЕМА ГОТОВА</p>
            </div>
        </div>
    </div>

    <!-- Экран логина -->
    <div id="login-screen" class="hidden">
        <div class="login-form">
            <p class="login-prompt">ДОСТУП К ТЕРМИНАЛУ</p>
            <div class="input-group">
                <label for="username">ИМЯ ПОЛЬЗОВАТЕЛЯ:</label>
                <input type="text" id="username" autocomplete="off">
            </div>
            <div class="input-group">
                <label for="password">ПАРОЛЬ:</label>
                <input type="password" id="password" autocomplete="off">
            </div>
            <button id="login-btn">АУТЕНТИФИКАЦИЯ</button>
            <p id="login-error" class="error hidden">ДОСТУП ЗАПРЕЩЁН</p>
        </div>
    </div>

    <!-- Подключаем основной скрипт (включает WebGL + логику интерфейса) -->
      <script src="screenGlass.js"></script>
      <script src="script.js"></script>
  <!-- ЕДИНЫЙ ИЗГИБ (как в терминале) -->
<script>
(()=>{
  const canvas = document.getElementById('shader-canvas');
  if(!canvas) return;
  const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
  if(!gl){ console.warn('WebGL нет'); return; }

  const vs = `
    attribute vec2 aPos;
    void main(){
      gl_Position = vec4(aPos, 0., 1.);
    }`;

  const fs = `
    precision mediump float;
    uniform vec2 uRes;
    uniform float uTime;
    varying vec2 vUv;

    float hash(vec2 p){ return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453); }
    float noise(vec2 p){
      vec2 i=floor(p), f=fract(p);
      float a=hash(i), b=hash(i+vec2(1,0)), c=hash(i+vec2(0,1)), d=hash(i+vec2(1,1));
      vec2 u=f*f*(3.-2.*f);
      return mix(a,b,u.x)+(c-a)*u.y*(1.-u.x)+(d-b)*u.x*u.y;
    }
    float fbm(vec2 p){
      float v=0., a=.5;
      for(int i=0;i<5;i++){ v+=a*noise(p); p*=2.; a*=.5; }
      return v;
    }
    void main(){
      vec2 uv = (gl_FragCoord.xy/uRes.xy)*2.-1.;
      float asp = uRes.x/uRes.y;
      uv.x *= asp;
      float r = dot(uv,uv);
      uv *= 1. + .32*r;               // баррель-изгиб
      vec2 f = (uv/vec2(asp,1.) + 1.)*.5;
      float t = uTime*.12;
      float n = fbm(f*6. + vec2(t, t*.5));
      float v = smoothstep(1.,.45,length(uv));
      vec3 col = vec3(.01,.02,.015) + vec3(0.,.8,.1)*pow(n,2.)*.7;
      col *= .5 + .5*v;
      gl_FragColor = vec4(pow(col,vec3(.9)),1.);
    }`;

  function compile(s,t){
    const sh = gl.createShader(t);
    gl.shaderSource(sh,s);
    gl.compileShader(sh);
    return sh;
  }
  const prog = gl.createProgram();
  gl.attachShader(prog, compile(vs,gl.VERTEX_SHADER));
  gl.attachShader(prog, compile(fs,gl.FRAGMENT_SHADER));
  gl.linkProgram(prog);
  gl.useProgram(prog);

  const buf = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER,buf);
  gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
  const ap = gl.getAttribLocation(prog,'aPos');
  gl.enableVertexAttribArray(ap);
  gl.vertexAttribPointer(ap,2,gl.FLOAT,0,0,0);

  const uRes = gl.getUniformLocation(prog,'uRes');
  const uTime= gl.getUniformLocation(prog,'uTime');

  function resize(){
    const dpr = Math.min(window.devicePixelRatio||1,1.5);
    canvas.width  = Math.floor(window.innerWidth *dpr);
    canvas.height = Math.floor(window.innerHeight*dpr);
    canvas.style.width  = window.innerWidth +'px';
    canvas.style.height = window.innerHeight+'px';
    gl.viewport(0,0,canvas.width,canvas.height);
    gl.uniform2f(uRes,canvas.width,canvas.height);
  }
  window.addEventListener('resize',resize);
  resize();

  let start = performance.now();
  function loop(now){
    gl.clearColor(0,0,0,1);
    gl.clear(gl.COLOR_BUFFER_BIT);
    gl.uniform1f(uTime,(now-start)/1000);
    gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
