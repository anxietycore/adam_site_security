(()=>{const t="'Press Start 2P', monospace",e=13,o=Math.round(1.45*e),a=18,n=1e4,i=Math.min(window.devicePixelRatio||1,2),s=14,r={BLOCKS:["█","▓","▒","░"],GLYPHS:["≣","≡","§","Σ","Ϟ","¶","×","Ø","◊","∑","Ω","·"],CUTS:["│","╫","┼","▌","▐"],ALL:null};r.ALL=[...r.BLOCKS,...r.GLYPHS,...r.CUTS];const l=new AudioManager;l.preloadCriticalSounds();class d{constructor(t,e,o=!1){this.start=t,this.length=e,this.originalChars=[],this.glitchedChars=[],this.lastSpasmTime=0,this.isCorrosion=o}isValidCharForPosition(t,e){const o=["█","▓"];if(!o.includes(t))return!0;const a=this.glitchedChars[e-1],n=this.glitchedChars[e+1];return!o.includes(a)&&!o.includes(n)}getSafeMutationCandidates(t){const e=["█","▓"],o=this.glitchedChars[t-1],a=this.glitchedChars[t+1];return e.includes(o)||e.includes(a)?r.ALL.filter((t=>!e.includes(t))):[...r.ALL]}canExpand(){return this.length<this.originalChars.length+3}tryExpandFragment(){if(!this.canExpand())return;const t=this.glitchedChars[this.glitchedChars.length-1],e=this.getSafeExpansionCandidates(t);e.length>0&&(this.length++,this.glitchedChars.push(e[Math.floor(Math.random()*e.length)]))}getSafeExpansionCandidates(t){const e=["█","▓"];return e.includes(t)?r.ALL.filter((t=>!e.includes(t))):[...r.ALL]}hasTooManyHeavyBlocks(t=this.glitchedChars){const e=["█","▓"];let o=0;for(let a=0;a<t.length;a++)if(e.includes(t[a])){if(o++,o>=2)return!0}else o=0;return!1}applyStaticGlitch(){const t=[...r.ALL],e=["█","▓"];if(this.isCorrosion){const e=t[Math.floor(Math.random()*t.length)];this.glitchedChars=[e||"▓"]}else this.glitchedChars=this.originalChars.map((()=>{let o,a=0;do{if(o=t[Math.floor(Math.random()*t.length)],a++,e.includes(o)&&a<10){const t=[...this.glitchedChars];t.push(o),this.hasTooManyHeavyBlocks(t)&&(o=null)}}while(!o&&a<20);return o||t[Math.floor(Math.random()*t.length)]||"▓"}))}applySpasm(t){const e=Date.now(),o=c(t);if(e-this.lastSpasmTime<o)return;this.lastSpasmTime=e;const a=Math.random()<.7?1:2,n=[];for(;n.length<a&&n.length<this.length;){const t=Math.floor(Math.random()*this.length);n.includes(t)||n.push(t)}n.forEach((t=>{const e=Math.random();let o;if(e<.6){const e=this.getSafeMutationCandidates(t);o=e[Math.floor(Math.random()*e.length)]}else if(e<.95)o=this.originalChars[t],setTimeout((()=>{if(this.glitchedChars[t]===o){const e=this.getSafeMutationCandidates(t);this.glitchedChars[t]=e[Math.floor(Math.random()*e.length)]}}),50+100*Math.random());else{const t=[...r.CUTS];o=t[Math.floor(Math.random()*t.length)]}this.isValidCharForPosition(o,t)&&(this.glitchedChars[t]=o)})),Math.random()<.02&&this.canExpand()&&this.tryExpandFragment()}tryExpandFragment(){if(this.length>=this.originalChars.length+3)return;this.length++;const t=[...r.ALL];this.glitchedChars.push(t[Math.floor(Math.random()*t.length)])}}function h(t,e,o,a){const n=t.text,i=t.originalText;if(!t.glitchLineId||!u.fragments.has(t.glitchLineId))return void a.fillText(n,e,o);const s=u.fragments.get(t.glitchLineId);let r=e;for(let t=0;t<i.length;t++){const e=i[t],l=n[t],d=a.measureText(e).width,h=s.find((e=>t>=e.start&&t<e.start+e.length));a.fillText(h?h.glitchedChars[t-h.start]||"▓":l,r,o),r+=d}}function c(t){if(t<40)return 1/0;if(t<60)return 1500+500*Math.random();if(t<80){return 1e3-500*((t-60)/20)+200*Math.random()}if(t<90){return 600-200*((t-80)/10)+100*Math.random()}if(t<95){return 300-100*((t-90)/5)+50*Math.random()}return 1500+500*Math.random()}const u=new class{constructor(){this.fragments=new Map,this.nextLineId=0}calculateOptimalFragmentCount(t,e,o){if(e<30)return 0;const a=o?.3:1;let n;return n=t<=20?e>80?2:1:t<=50?Math.floor((e-30)/70*Math.min(5,t/10)):Math.floor((e-30)/70*Math.min(10,t/5)),Math.max(0,n*a)}createFragmentForLine(t,e,o,a){const n=o?2:e>80?4:3;for(let e=0;e<30;e++){const e=Math.floor(Math.random()*n)+1,o=Math.floor(Math.random()*(t.length-e+1));let i=!1;for(let t=o;t<o+e;t++)if(a.has(t)){i=!0;break}if(!i){const a=new d(o,e,!1);return a.originalChars=t.substr(o,e).split(""),a.applyStaticGlitch(),a}}return null}processStatic(t,e){const o=t.startsWith("adam@secure:~$")||t.startsWith(">")||t.startsWith("[");if(o&&e<50)return{text:t,lineId:null,fragments:[]};const a=this.calculateOptimalFragmentCount(t.length,e,o);if(0===a)return{text:t,lineId:null,fragments:[]};const n=[],i=new Set,s=t.split("");for(let s=0;s<a;s++){const a=this.createFragmentForLine(t,e,o,i);if(a){n.push(a);for(let t=a.start;t<a.start+a.length;t++)i.add(t)}}n.forEach((t=>{for(let e=0;e<t.length;e++){const o=t.start+e;o<s.length&&(s[o]=t.glitchedChars[e])}}));const r=n.length>0?this.nextLineId++:null;return r&&this.fragments.set(r,n),{text:s.join(""),lineId:r,fragments:n}}applyDynamicSpasms(t){const e=Date.now(),o=c(t),a=Math.min(.05,(t-50)/1e3);this.fragments.forEach(((n,i)=>{n.forEach((n=>{if(e-n.lastSpasmTime<o)return;n.lastSpasmTime=e;const s=Math.random()<.7?1:2,l=[];for(;l.length<s&&l.length<n.length;){const t=Math.floor(Math.random()*n.length);l.includes(t)||l.push(t)}l.forEach((t=>{const e=Math.random();let o;if(e<.6){const e=n.getSafeMutationCandidates(t);o=e[Math.floor(Math.random()*e.length)]}else if(e<.95){const e=n.originalChars[t];o=e,setTimeout((()=>{if(n.glitchedChars[t]===e){const e=n.getSafeMutationCandidates(t);n.glitchedChars[t]=e[Math.floor(Math.random()*e.length)]}}),50+100*Math.random())}else{const t=[...r.CUTS];o=t[Math.floor(Math.random()*t.length)]}n.isValidCharForPosition(o,t)&&(n.glitchedChars[t]=o)})),Math.random()<a&&n.canExpand()&&n.tryExpandFragment(),t>70&&Math.random()<.01&&this.infectNeighbouringCharacters(i,n)}))}))}infectNeighbouringCharacters(t,e){const o=S.find((e=>e.glitchLineId===t));if(!o||!o.originalText)return;const a=o.originalText,n=this.fragments.get(t)||[];if(e.start>0){const t=e.start-1;if(!n.some((e=>t>=e.start&&t<e.start+e.length))&&Math.random()<.3){const e=new d(t,1,Math.random()<.2);e.originalChars=[a[t]],e.applyStaticGlitch(),e.lastSpasmTime=Date.now(),n.push(e)}}const i=e.start+e.length;if(i<a.length){if(!n.some((t=>i>=t.start&&i<t.start+t.length))&&Math.random()<.3){const t=new d(i,1,Math.random()<.2);t.originalChars=[a[i]],t.applyStaticGlitch(),t.lastSpasmTime=Date.now(),n.push(t)}}}clearFragments(t){this.fragments.delete(t)}},m=document.createElement("canvas");m.id="terminalCanvas",Object.assign(m.style,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%",zIndex:50,pointerEvents:"auto",userSelect:"none"}),document.body.appendChild(m);const p=m.getContext("2d",{alpha:!1}),f=document.getElementById("terminal");if(f){f.style.opacity="0",f.style.pointerEvents="auto";try{new MutationObserver((t=>{t.forEach((t=>{t.addedNodes&&t.addedNodes.forEach((t=>{if(t&&(1===t.nodeType||3===t.nodeType))try{t.remove()}catch(t){}}))}))})).observe(f,{childList:!0,subtree:!0})}catch(t){}}const g=document.getElementById("glassFX");g&&(g.style.opacity="0",g.style.pointerEvents="auto");const F=(()=>{const t=Array.from(document.querySelectorAll("canvas")).find((t=>"shader-canvas"!==t.id&&"terminalCanvas"!==t.id&&"crtOverlayCanvas"!==t.id&&"glassFX"!==t.id));return t?(t.style.opacity="0",t.style.pointerEvents="auto",t):null})();let y=0,v=0,w=!1;function M(){w||(w=!0,requestAnimationFrame((()=>{w=!1;try{!function(){if(p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i),p.fillStyle="#000",p.fillRect(0,0,y,v),p.restore(),function(){p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i);const t=document.getElementById("shader-canvas");if(t&&t.width>0)try{p.drawImage(t,0,0,y,v)}catch(t){}if(F&&F.width>0&&F.height>0)try{const t=F.getBoundingClientRect(),e=Math.round(t.left),o=Math.round(t.top),a=Math.round(t.width),n=Math.round(t.height);p.drawImage(F,e,o,a,n)}catch(t){}if(g&&g.width>0&&g.height>0)try{p.globalAlpha=.12,p.globalCompositeOperation="source-over",p.drawImage(g,0,0,y,v),p.globalAlpha=1,p.globalCompositeOperation="source-over"}catch(t){}p.restore()}(),function(){p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i),p.font=`${e}px ${t}`,p.textBaseline="top";const n=v-2*a,s=Math.max(1,Math.floor(n/o)),r=(Math.max(0,S.length-s),Math.max(0,S.length-s-T)),l=Math.min(S.length,r+s);let d=a;let c=0,u=0;if(st.level>=60){const t=.1;c=(Math.random()-.5)*t,u=(Math.random()-.5)*t}if(p.translate(c,u),U>0){const t=(Math.random()-.5)*U*50,e=(Math.random()-.5)*U*50;p.translate(t,e)}for(let t=r;t<l;t++){const e=S[t];let n=e.color||"#00FF41";st.level>=60&&Math.random()<.01&&(n=["#FF4444","#FF8800","#FFFF00","#4d00ff"][Math.floor(4*Math.random())]),H&&t===z&&(n="#FF4444"),p.fillStyle=n,h(e,a+c,d,p),d+=o}p.restore(),window.__netGrid&&window.__netGrid.isGridMode()||!(S.length>0)||S[S.length-1]._isInputLine||x||k||W||J||ot||Z||it&&it.isBlocked()||setTimeout((()=>{mt()}),100)}(),function(){const e=Math.min(420,Math.floor(.38*y));let o=56;st.level>=70?o=85:st.level>=60&&(o=95);const a=Math.max(10,y-e-20),n=20;p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i),p.fillStyle="rgba(0,0,0,0.9)",lt(p,a,n,e,o,6),p.fill();let s="#00FF41";st.level>30&&(s="#FFFF00");st.level>60&&(s="#FF8800");st.level>80&&(s="#FF4444");st.level>95&&(s="#FF00FF");p.lineWidth=2,p.strokeStyle=s,lt(p,a,n,e,o,6),p.stroke();const r=a+8,l=n+22,d=e-16,h=12;p.fillStyle="#333",p.fillRect(r,l,d,h),p.fillStyle=s,p.fillRect(r,l,Math.round(d*(st.level/100)),h),p.fillStyle=s,p.font=`12px ${t}`,p.fillText("ДЕГРАДАЦИЯ СИСТЕМЫ",a+10,n+18);const c=a+e-46;if(p.fillText(st.level+"%",c,n+18),st.level>=70){const e=n+o-18;(Math.floor(Date.now()/500)%2==0||st.level<75)&&(p.fillStyle="#FF4444",p.font=`11px ${t}`,p.fillText("> СРОЧНО ВВЕДИТЕ RESET",a+10,e))}else if(st.level>=60){const e=n+o-35,i=e+20;p.fillStyle="#FFFF00",p.font=`11px ${t}`,p.fillText("> используйте команду",a+10,e),p.fillText("RESET для стабилизации",a+10,i)}p.restore()}(),H){if(p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i),K>0){p.globalAlpha=.9*K;for(let t=0;t<550;t++){const t=Math.random()*y,e=Math.random()*v,o=1,a=400*Math.random()+255;p.fillStyle=`rgb(${a}, ${a}, ${a})`,p.fillRect(t,e,o,o)}p.globalAlpha=.15*K;for(let t=0;t<300;t++){const t=Math.random()*y,e=Math.random()*v,o=2,a=150*Math.random();p.fillStyle=`rgb(${a}, ${a}, ${a})`,p.fillRect(t,e,o,o)}}V>.3&&(p.globalAlpha=.15*(V-.3),p.fillStyle="#FFFFFF",p.fillRect(0,0,y,v)),p.restore()}if(st.level>=80&&st.level<90&&S.length>0&&S[S.length-1].text.startsWith("adam@secure:~$")&&!x){p.save(),p.setTransform(1,0,0,1,0,0),p.scale(i,i);const n=S[S.length-1],s=p.measureText(n.text).width,r=a+s+2,l=v-a-o,d=Math.floor(Date.now()/150)%3;0===d?(p.fillStyle="#00FF41",p.fillRect(r,l,6,o-4)):1===d&&(p.fillStyle="#8844FF",p.font=`${e}px ${t}`,p.fillText("▓",r,l)),p.restore()}}()}catch(t){}})))}function A(){y=Math.max(320,window.innerWidth),v=Math.max(240,window.innerHeight),m.width=Math.floor(y*i),m.height=Math.floor(v*i),m.style.width=y+"px",m.style.height=v+"px",p.setTransform(1,0,0,1,0,0),p.scale(i,i),M()}window.addEventListener("resize",A),A();const S=[];let T=0,C="",E=[],I=-1,x=!1,_=!1,L=null,D=null,P=0,b=Date.now(),k=!1,R=null,$=null,O=null,G=null,B=null,N={text:null,ts:0},X=0,Y=!1,W=!1,H=!1,V=0,U=0,K=0,z=-1,J=!1,j=null,q=JSON.parse(localStorage.getItem("vigilCodeParts"))||{alpha:null,beta:null,gamma:null},Z=!1,Q=0,tt=!1;Z&&(Z=!1,st.level=Q,st.updateIndicator(),st.restoreWorld(),setTimeout((()=>{ct("> VIGIL999 ПРЕРВАН ОБНОВЛЕНИЕМ СТРАНИЦЫ","#FFFF00"),ct("> ДЛЯ ПОВТОРНОГО ЗАПУСКА ВВЕДИТЕ VIGIL999","#FFFF00"),mt()}),1e3));let et=!1,ot=!1,at=null,nt=0;const it=new class{constructor(){this.activeOperation=null,this.queue=[]}start(t,e){if(this.activeOperation)return this.queue.push({type:t,callback:e}),!1;switch(this.activeOperation=t,t){case"reset":case"auto-reset":case"dossier":case"note":window.isFrozen=!0;break;case"decrypt":window.isFrozen=!0,window.decryptActive=!0;break;case"trace":window.isFrozen=!0,window.traceActive=!0;break;case"audio":window.isFrozen=!0,window.audioPlaybackActive=!0}return e&&e(),!0}end(t,e){if(this.activeOperation===t&&(window.isFrozen=!1,window.decryptActive=!1,window.traceActive=!1,window.audioPlaybackActive=!1,window.awaitingConfirmation=!1,window.isTyping=!1,this.activeOperation=null,"vigil999"!==t&&mt(),e&&e(),this.queue.length>0)){const t=this.queue.shift();setTimeout((()=>this.start(t.type,t.callback)),200)}}isBlocked(){return!!this.activeOperation}};const st=new class{constructor(){this.level=parseInt(localStorage.getItem("adam_degradation"))||0,this.lastSoundLevel=0,this.glitchAmbientActive=!1,this.ghostActive=!1,this.autoActive=!1,this.effectsActive=!1,this.soundPlayedAt45=!1,this.ghostCommandCount=0,this.lastDistortion={status:null,role:null,time:0},this.falseResetCount=0,this.intentionPredictionCount=0,this.phantomDossierCount=0,this.voiceAdam03Played="true"===localStorage.getItem("voiceAdam03Played"),this.voiceWhisper03Played="true"===localStorage.getItem("voiceWhisper03Played"),this.voiceAdam03Threshold=parseInt(localStorage.getItem("voiceAdam03Threshold"))||63+Math.floor(9*Math.random()),this.voiceWhisper03Threshold=parseInt(localStorage.getItem("voiceWhisper03Threshold"))||83+Math.floor(9*Math.random()),localStorage.setItem("voiceAdam03Threshold",this.voiceAdam03Threshold.toString()),localStorage.setItem("voiceWhisper03Threshold",this.voiceWhisper03Threshold.toString()),this.indicator=document.createElement("div"),this.indicator.style.cssText=`position:fixed; top:20px; right:20px; opacity:0; pointer-events:none; font-family:${t};`,document.body.appendChild(this.indicator),this.updateIndicator(),this.startTimer(),this.updateEffects()}stopWorld(){tt||(tt=!0,this._timer&&(clearInterval(this._timer),this._timer=null),R&&(clearInterval(R),R=null),$&&(clearInterval($),$=null),O&&(clearInterval(O),O=null),G&&(clearInterval(G),G=null),B&&(clearInterval(B),B=null),u&&u._animationTimer&&(clearInterval(u._animationTimer),u._animationTimer=null))}restoreWorld(){tt&&(tt=!1,this.startTimer(),this.updateEffects())}startTimer(){this._timer=setInterval((()=>{document.hidden||k||W||J||ot||this.addDegradation(1)}),3e4)}addDegradation(t){if(k||W||J||ot||Z)return;this.level;return this.level=Math.max(0,Math.min(100,this.level+t)),localStorage.setItem("adam_degradation",String(this.level)),this.updateIndicator(),this.updateEffects(),window.__netGrid&&window.__netGrid.setSystemDegradation(this.level),this.isVoicePlaying||(this.level>=55&&this.level<70&&Math.floor(this.level/10)!==Math.floor(this.lastSoundLevel/10)?l.playSystemSound("reset_com"):this.level>=70&&this.level<80&&Math.floor(this.level/10)!==Math.floor(this.lastSoundLevel/10)?l.playSystemSound("reset_com_reverse"):this.level>=80&&this.level<95&&Math.floor(this.level/10)!==Math.floor(this.lastSoundLevel/10)&&l.playSystemSound("reset_com_reverse",{})),this.lastSoundLevel=this.level,!this.voiceAdam03Played&&this.level>=this.voiceAdam03Threshold?(l.playVoiceSound("adam_03"),this.voiceAdam03Played=!0,localStorage.setItem("voiceAdam03Played","true")):!this.voiceWhisper03Played&&this.level>=this.voiceWhisper03Threshold&&(l.playVoiceSound("whisper_03"),this.voiceWhisper03Played=!0,localStorage.setItem("voiceWhisper03Played","true")),this.level>=98&&!k?(k=!0,void this.triggerGlitchApocalypse()):void 0}updateIndicator(){const t=this.level>95?"#FF00FF":this.level>80?"#FF4444":this.level>60?"#FF8800":this.level>30?"#FFFF00":"#00FF41";this.indicator.innerHTML=`\n      <div style="color:${t};font-weight:700">ДЕГРАДАЦИЯ СИСТЕМЫ</div>\n      <div style="background:#222;height:12px;margin:6px 0;border:2px solid ${t}">\n        <div style="background:${t};height:100%;width:${this.level}%;transition:width 0.3s"></div>\n      </div>\n      <div style="color:${t};font-weight:700">${this.level}%</div>\n    `,this.indicator.style.opacity="1",M()}updateEffects(){this.level>=30&&this.level<60?this.startPhantomCommands():this.stopPhantomCommands(),this.level>=50&&this.level<70?this.startTextFlashes():this.stopTextFlashes(),this.level>=70&&this.level<90?this.startTextShaking():this.stopTextShaking(),this.level>=70&&this.level<80||this.stopAnomalousInserts(),this.level>=80&&this.level<90?this.startCommandBlocking():this.stopCommandBlocking(),this.level>=90&&this.level<97?this.startPsychologicalBlocking():this.stopPsychologicalBlocking(),this.level>=90&&this.level<97?this.startPhantomDossiers():this.stopPhantomDossiers(),this.level>=95&&this.level<98?this.startInputInversion():this.stopInputInversion(),this.level>=80&&this.level<95&&!this.ghostActive?(this.startGhostInput(),this.ghostActive=!0):this.level<80&&this.ghostActive&&(this.stopGhostInput(),this.ghostActive=!1),this.level>=80&&this.level<95&&!this.autoActive?(this.startAutoCommands(),this.autoActive=!0):this.level<80&&this.autoActive&&(this.stopAutoCommands(),this.autoActive=!1),this.level>=80&&window.__netGrid&&window.__netGrid.setSystemDegradation(this.level),this.level>=70&&!this.glitchAmbientActive?(this.glitchAudio=new Audio("sounds/ambient/ambient_glitch.mp3"),this.glitchAudio.volume=.4,this.glitchAudio.loop=!0,this.glitchAudio.play().catch((()=>{})),this.glitchAmbientActive=!0):this.level<70&&this.glitchAmbientActive&&(this.glitchAudio&&(this.glitchAudio.pause(),this.glitchAudio=null),this.glitchAmbientActive=!1),document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch"),this.level>=30&&this.level<60?document.body.classList.add("degradation-2"):this.level>=60&&this.level<80?document.body.classList.add("degradation-3"):this.level>=80&&this.level<90?document.body.classList.add("degradation-4"):this.level>=90&&this.level<95?document.body.classList.add("degradation-5"):this.level>=95&&this.level<98?document.body.classList.add("degradation-6"):this.level>=98&&document.body.classList.add("degradation-glitch"),M()}triggerGlitchApocalypse(){W||J||ot||Z||it.start("auto-reset",(()=>{l.stopBackgroundMusic(),l.playSystemSound("glitch_e",{volume:.9}),setTimeout((()=>{W||J||Z||l.playAmbientSeamless("ambient_terminal.mp3",.2)}),7e3),this.applyGlitchEffects(),setTimeout((()=>{this.showResetProgress()}),4e3)}))}showResetProgress(){S.length=0,dt("","#000000"),dt(">>> ПРИНУДИТЕЛЬНЫЙ СБРОС СИСТЕМЫ <<<","#FF00FF"),dt("","#000000"),dt("> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [          ]","#FFFF00");let t=0;const e=setInterval((()=>{if(t+=10,t>=100)return clearInterval(e),S.length>0&&(S[S.length-1].text="> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [||||||||||] 100%",M(),window.__netGrid.setSystemDegradation(0),window.__netGrid.addDegradation(-100)),void setTimeout((()=>this.performAutoReset()),1e3);if(S.length>0){const e=Math.floor(t/10),o=10-e;S[S.length-1].text=`> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [${"|".repeat(e)}${" ".repeat(o)}] ${t}%`,M()}}),200)}performAutoReset(){st.glitchAmbientActive=!1,localStorage.setItem("voiceAdam03Played","false"),localStorage.setItem("voiceWhisper03Played","false"),localStorage.setItem("voiceAdam03Threshold",(60+Math.floor(9*Math.random())).toString()),localStorage.setItem("voiceWhisper03Threshold",(80+Math.floor(9*Math.random())).toString()),st&&(st.voiceAdam03Played=!1,st.voiceWhisper03Played=!1,st.voiceAdam03Threshold=parseInt(localStorage.getItem("voiceAdam03Threshold")),st.voiceWhisper03Threshold=parseInt(localStorage.getItem("voiceWhisper03Threshold"))),q={alpha:null,beta:null,gamma:null},localStorage.removeItem("vigilCodeParts"),et=!1,S.length=0,dt(">>> АВТОМАТИЧЕСКИЙ СБРОС СИСТЕМЫ <<<","#00FF41"),dt("> Стабилизация ядра A.D.A.M.","#FFFF00"),M(),setTimeout((()=>{st.level=0,localStorage.setItem("adam_degradation","0"),st.updateIndicator(),st.updateEffects(),window.__netGrid&&(window.__netGrid.setSystemDegradation(0),window.__netGrid.forceReset(),window.__netGrid.setGridMode(!1)),document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch"),document.body.style.filter="",document.body.style.backdropFilter="",dt(">>> СИСТЕМА ВОССТАНОВЛЕНА <<<","#00FF41"),dt("> Стабильность: 100%","#00FF41"),dt("> ТЕРМИНАЛ A.D.A.M. // VIGIL-9 АКТИВЕН","#00FF41"),dt('> ВВЕДИТЕ "help" ДЛЯ СПИСКА КОМАНД',"#00FF41"),C="";S.push({text:"adam@secure:~$ ",color:"#00FF41",_isInputLine:!0}),T=0,M(),k=!1,x=!1,_=!1,W=!1,J=!1,ot=!1,intentionPredicted=!1,l.backgroundStarted&&!l.backgroundPlaying&&setTimeout((()=>{l.playAmbientSeamless("ambient_terminal.mp3",.2)}),1e3),it&&"auto-reset"===it.activeOperation&&(it.activeOperation=null)}),1e3)}clearGlitchEffects(){const t=document.getElementById("glitchLayer");t&&t.remove();const e=document.getElementById("cursorLayer");e&&e.remove(),document.body.style.filter="",document.body.style.transition="",G&&(clearInterval(G),G=null),B&&(clearInterval(B),B=null),document.querySelectorAll("#glitchLayer, #cursorLayer").forEach((t=>t.remove()))}clearAllVisualEffects(){document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch"),document.querySelectorAll("#glitchLayer, #cursorLayer").forEach((t=>t.remove())),document.body.style.filter="",document.body.style.backdropFilter="",document.body.style.mixBlendMode="",document.body.style.transition="",p.clearRect(0,0,m.width,m.height)}fullSystemReset(){this.glitchAmbientActive=!1,this.voiceAdam03Played=!1,this.voiceWhisper03Played=!1,this.voiceAdam03Threshold=63+Math.floor(9*Math.random()),this.voiceWhisper03Threshold=83+Math.floor(9*Math.random()),localStorage.setItem("voiceAdam03Played","false"),localStorage.setItem("voiceWhisper03Played","false"),localStorage.setItem("voiceAdam03Threshold",this.voiceAdam03Threshold.toString()),localStorage.setItem("voiceWhisper03Threshold",this.voiceWhisper03Threshold.toString()),k=!1,x=!1,_=!1,L=null,D=null,P=0,b=Date.now(),X=0,Y=!1,intentionPredicted=!1,W=!1,J=!1,j=null,ot=!1,at=null,nt=0,S.length=0,E=[],I=-1,C="",this.clearGlitchEffects(),this.clearAllVisualEffects(),window.__netGrid&&("function"==typeof window.__netGrid.reset&&window.__netGrid.reset(),window.__netGrid.addDegradation(-100),window.__netGrid.setSystemDegradation(0),window.__netGrid.isGridMode&&window.__netGrid.isGridMode()&&window.__netGrid.setGridMode(!1)),this.level=0,this.lastSoundLevel=0,this.soundPlayedAt45=!1,this.falseResetCount=0,this.intentionPredictionCount=0,this.phantomDossierCount=0,localStorage.setItem("adam_degradation","0"),this.stopGhostInput(),this.stopAutoCommands(),this.stopPhantomCommands(),this.stopTextShaking(),this.stopTextFlashes(),this.stopAnomalousInserts(),this.stopCommandBlocking(),this.stopPsychologicalBlocking(),this.stopPhantomDossiers(),this.stopInputInversion(),this.ghostActive=!1,this.autoActive=!1,document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch"),document.body.style.filter="",document.body.style.backdropFilter="",document.body.style.mixBlendMode="",document.body.style.transition="",this.updateIndicator(),M()}applyGlitchEffects(){if(!(W||J||ot))try{document.body.style.transition="filter 120ms",document.body.style.filter="invert(1) contrast(1.3) saturate(0.8)";const t=document.createElement("div");t.id="glitchLayer",t.style.cssText="\n        position:fixed;\n        top:0;\n        left:0;\n        width:100%;\n        height:100%;\n        pointer-events:none;\n        z-index:9999;\n        background:transparent;\n        opacity:0.3;\n      ",document.body.appendChild(t);let e=0;const o=setInterval((()=>{if(e>=20)clearInterval(o);else{t.innerHTML="";for(let e=0;e<50;e++){const e=document.createElement("span");e.style.cssText=`\n            position:absolute;\n            top:${100*Math.random()}%;\n            left:${100*Math.random()}%;\n            color:#${Math.floor(16777215*Math.random()).toString(16)};\n            font-size:${8+12*Math.random()}px;\n            opacity:${.3+.7*Math.random()};\n          `,t.appendChild(e)}e++}}),50),a=document.createElement("div");a.id="cursorLayer",a.style.cssText="\n        position:fixed;\n        top:50%;\n        left:50%;\n        transform:translate(-50%, -50%);\n        color:#FF00FF;\n        font-weight:bold;\n        font-size:24px;\n        z-index:10000;\n      ",a.textContent="▓",document.body.appendChild(a)}catch(t){}}reset(){this.voiceAdam03Played=!1,this.glitchAmbientActive=!1,this.voiceWhisper03Played=!1,this.voiceAdam03Threshold=63+Math.floor(9*Math.random()),this.voiceWhisper03Threshold=83+Math.floor(9*Math.random()),localStorage.setItem("voiceAdam03Played","false"),localStorage.setItem("voiceWhisper03Played","false"),localStorage.setItem("voiceAdam03Threshold",this.voiceAdam03Threshold.toString()),localStorage.setItem("voiceWhisper03Threshold",this.voiceWhisper03Threshold.toString()),this.level=0,this.lastSoundLevel=0,this.soundPlayedAt45=!1,this.falseResetCount=0,this.intentionPredictionCount=0,this.phantomDossierCount=0,localStorage.setItem("adam_degradation","0"),this.stopGhostInput(),this.stopAutoCommands(),this.stopPhantomCommands(),this.stopTextShaking(),this.stopTextFlashes(),this.stopAnomalousInserts(),this.stopCommandBlocking(),this.stopPsychologicalBlocking(),this.stopPhantomDossiers(),this.stopInputInversion(),this.ghostActive=!1,this.autoActive=!1,window.__netGrid&&(window.__netGrid.addDegradation(-100),window.__netGrid.setSystemDegradation(0),"function"==typeof window.__netGrid.setGridMode&&window.__netGrid.setGridMode(!1)),this.updateEffects(),M()}startGhostInput(){R||(R=setInterval((()=>{x||k||W||J||ot||!(Math.random()<.12)||(C+=["0","1","▓","█","[","]","{","}","/","\\","▄","▀","▌"][Math.floor(13*Math.random())],ft(),setTimeout((()=>{C.length>0&&(C=C.slice(0,-1),ft())}),1100*Math.random()+300))}),1800))}stopGhostInput(){R&&(clearInterval(R),R=null)}startAutoCommands(){$||($=setInterval((()=>{x||k||W||J||ot||!(Math.random()<.06)||this.executeAutoCommand()}),15e3))}stopAutoCommands(){$&&(clearInterval($),$=null)}executeAutoCommand(){const t=["KILL","A.D.A.M. ЗДЕСЬ","ОНИ ВНУТРИ","УБЕРИСЬ ОТСЮДА","SOS","ПОМОГИ","ВЫХОДА НЕТ","НЕ СМОТРИ","ОН ПРОСЫПАЕТСЯ"].concat(["help","syst","syslog","subj","notes","clear","reset","exit","dscr 0x001","open NOTE_001"]),e=t[Math.floor(Math.random()*t.length)];this.simulateTyping(e)}simulateTyping(t){let e="";const o=()=>{!(e.length<t.length)||k||W||J||ot?k||W||J||ot||setTimeout((()=>{W||J||ot||(Pt(C),C="",ft())}),480):(e+=t[e.length],C=e,ft(),l.playKeyPress("generic"),setTimeout(o,100))};o()}startPhantomCommands(){O||(O=setInterval((()=>{}),100))}stopPhantomCommands(){O&&(clearInterval(O),O=null)}startTextFlashes(){B||(B=setInterval((()=>{const e=["он наблюдает","ты ещё здесь?","ошибка // сознание","не отключайся","ADAM видит тебя","он слышит","сигнал искажён","потеря синхронизации","что ты ищешь?","он знает"],o=e[Math.floor(Math.random()*e.length)],a=document.createElement("div");a.setAttribute("style",`\n        position: fixed !important;\n        top: ${80*Math.random()+10}% !important;\n        left: ${80*Math.random()+10}% !important;\n        color: #AAAAAA !important;\n        font-family: ${t} !important;\n        font-size: 14px !important;\n        text-shadow: none !important;\n        pointer-events: none !important;\n        opacity: 0 !important;\n        transition: opacity 0.2s !important;\n        z-index: 9999 !important;\n        filter: none !important;\n        animation: none !important;\n        mix-blend-mode: normal !important;\n        background: transparent !important;\n        border: none !important;\n        box-shadow: none !important;\n        letter-spacing: normal !important;\n        line-height: normal !important;\n        text-transform: none !important;\n        font-weight: normal !important;\n        transform: none !important;\n      `),a.textContent=o,document.body.appendChild(a),setTimeout((()=>{a.style.opacity="1"}),10),setTimeout((()=>{a.style.opacity="0",setTimeout((()=>{a.parentNode&&a.parentNode.removeChild(a)}),200)}),800)}),6e3*Math.random()+12e3))}stopTextFlashes(){B&&(clearInterval(B),B=null),document.querySelectorAll('[style*="pointer-events:none"][style*="z-index:9999"]').forEach((t=>t.remove()))}startTextShaking(){G||(G=setInterval((()=>{}),30))}stopTextShaking(){G&&(clearInterval(G),G=null)}stopAnomalousInserts(){this._anomalousTimer&&(clearInterval(this._anomalousTimer),this._anomalousTimer=null)}startCommandBlocking(){this.commandBlockActive=!0}stopCommandBlocking(){this.commandBlockActive=!1}startPsychologicalBlocking(){this.psychoBlockActive=!0}stopPsychologicalBlocking(){this.psychoBlockActive=!1}startPhantomDossiers(){this.phantomDossiersActive=!0}stopPhantomDossiers(){this.phantomDossiersActive=!1}startInputInversion(){this.inputInversionActive=!0}stopInputInversion(){this.inputInversionActive=!1}getPhantomCommand(){if(this.ghostCommandCount++,this.level>=30&&this.ghostCommandCount>=7){this.ghostCommandCount=0;const t=["ADAM WATCHING","СИГНАЛ ПОТЕРЯН","ОНИ ВНУТРИ"];return t[Math.floor(Math.random()*t.length)]}return null}getDistortedStatus(t){if(this.level<30||Math.random()>.3)return t;return{"СВЯЗЬ ОТСУТСТВУЕТ":"ADAM ДЫШИТ","МЁРТВ / СОЗНАНИЕ АКТИВНО":"ОН ПРОСЫПАЕТСЯ"}[t]||t}getDistortedRole(t){if(this.level<30||Math.random()>.3)return t;return{"Руководитель программы VIGIL-9 / Исследователь миссии MARS":"НАБЛЮДАТЕЛЬ-0","Тест нейроплантов серии KATARHEY":"ОН ВИДИТ"}[t]||t}setDegradationLevel(t){this.level=Math.max(0,Math.min(100,t)),localStorage.setItem("adam_degradation",String(this.level)),this.updateIndicator(),this.updateEffects(),0===t&&window.__netGrid&&(window.__netGrid.setSystemDegradation(0),window.__netGrid.forceReset(),setTimeout((()=>{window.__netGrid&&(window.__netGrid.forceReset(),window.__netGrid.addDegradation(0))}),100))}};function rt(t){return t.split("").reverse().join("")}function lt(t,e,o,a,n,i){t.beginPath(),t.moveTo(e+i,o),t.arcTo(e+a,o,e+a,o+n,i),t.arcTo(e+a,o+n,e,o+n,i),t.arcTo(e,o+n,e,o,i),t.arcTo(e,o,e+a,o,i),t.closePath()}function dt(t,e,o=!1,a=!1,i=!1){let s=t,r=null;if(!(o||t.startsWith("adam@secure:~$")||t.startsWith(">")||t.startsWith("["))){const e=u.processStatic(t,st.level);s=e.text,r=e.lineId}if(S.push({text:String(s),originalText:t,color:e||"#00FF41",skipDistortion:o,_ephemeral:a,_isInputLine:i,glitchLineId:r}),S.length>n){S.splice(0,S.length-n).forEach((t=>{t.glitchLineId&&u.clearFragments(t.glitchLineId)}))}}function ht(t,e="output"){if(k||W||J||ot)return;dt(t,"command"===e?"#FFFFFF":"#00FF41"),T=0,M()}function ct(t,e="#00FF41",o=!1){k||W||J||ot||(dt(t,e,o),T=0,M())}async function ut(t,e="output",o=s,a=!1){if(k||W||J||ot)return;x=!0;let i="";const r="command"===e?"#FFFFFF":"#00FF41";for(let e=0;e<t.length&&(i+=t[e],S.length&&S[S.length-1]._ephemeral?(S[S.length-1].text=i,S[S.length-1].color=r,S[S.length-1].originalText=i):S.push({text:i,originalText:i,color:r,_ephemeral:!0,skipDistortion:!0}),S.length>n&&S.splice(0,S.length-n),M(),await new Promise((t=>setTimeout(t,o))),!(k||W||J||ot));e++);if(S.length&&S[S.length-1]._ephemeral){const t=S[S.length-1];if(t.text=i,t.originalText=i,delete t._ephemeral,delete t.skipDistortion,!a&&st.level>=30){const e=u.processStatic(i,st.level);t.text=e.text,t.glitchLineId=e.lineId}}else i&&dt(i,r,a);x=!1,T=0,M()}function mt(){if(k||W||J||ot||Z)return;const t=S[S.length-1];if(t&&t._isInputLine)return;S.push({text:"adam@secure:~$ ",color:"#00FF41",_isInputLine:!0}),T=0,M()}function pt(t=-1){if(H)return;H=!0,V=1,U=1,K=1,z=t,l.playSystemSound("glitch_error",{volume:.4});const e=()=>{V=Math.max(0,V-.05),U=Math.max(0,U-.12),K=Math.max(0,K-.08),V>0?requestAnimationFrame(e):(H=!1,z=-1),M()};e()}function ft(){if(k||W||J||ot)return;const t=S[S.length-1];t&&t.text&&(t.text.includes("adam@secure:~$")||t.text.includes("ADAM@secure:~$")||t.text.includes("aD@m.secuRe:~$")||t.text.includes("@d@m.v1g1l:~$"))?(t.text="adam@secure:~$ "+C,t.color="#00FF41"):dt("adam@secure:~$ "+C,"#00FF41"),M()}const gt={"0X001":{name:"ERICH VAN KOSS",role:"Руководитель программы VIGIL-9 / Исследователь миссии MARS",status:"СВЯЗЬ ОТСУТСТВУЕТ",outcome:["Зафиксирована несанкционированная передача данных внешним структурам (FBI).","Субъект предпринял попытку уничтожения маяка в секторе 3-D.","Телеметрия прервана, дальнейшее наблюдение невозможно."],report:["Классификация инцидента: SABOTAGE-3D.","Рекомендовано аннулирование личных протоколов и перенос архивов в OBSERVER.","ЗАПИСИ 0XA71: ПЕРВЫЙ ПРЫЖОК УСПЕШЕН | ИСПОЛЬЗУЙТЕ DECRYPT 0XA71"],missions:"MARS, OBSERVER",audio:"sounds/dscr1.mp3",audioDescription:"Последняя передача Эриха Ван Косса"},"0X2E7":{name:"JOHAN VAN KOSS",role:"Тестовый субъект V9-MR / Сын Эриха Ван Косса",status:"СВЯЗЬ ОТСУТСТВУЕТ",outcome:["После инцидента MARS зафиксировано устойчивое излучение из зоны криоструктуры.","Сигнатура нейроволн совпадает с профилем субъекта.","Инициирована установка маяка для фиксации остаточного сигнала."],report:["Активность нейросети перестала фиксироваться."],missions:"MARS, MONOLITH"},"0X095":{name:"SUBJECT-095",role:"Тест нейроплантов серии KATARHEY",status:"МЁРТВ",outcome:["Зафиксированы следы ФАНТОМА.","Субъект выдержал 3ч 12м, проявил острый психоз. Погиб вследствие термической декомпрессии (7.81с).","Тест признан неуспешным.","СИСТЕМНОЕ УВЕДОМЛЕНИЕ: ФАЙЛ 0XB33 ПОВРЕЖДЕН | ИСПОЛЬЗУЙТЕ DECRYPT 0XB33"],report:["Рекомендовано ограничить тесты KATARHEY до категории ALPHA-4."],missions:"KATARHEY",audio:"sounds/dscr2.mp3",audioDescription:"Последняя запись субъекта - психоз и крики"},"0XF00":{name:"SUBJECT-PHANTOM",role:"Экспериментальный субъект / протокол KATARHEY",status:"АНОМАЛИЯ",outcome:["Продержался 5ч 31м. Связь утрачена.","Зафиксирована автономная активность в сетевых узлах после разрыва канала.","Возможна самоорганизация цифрового остатка."],report:["Объект классифицирован как независимая сущность.","Вмешательство запрещено. Файл перенесён в зону наблюдения."],missions:"KATARHEY",audio:"sounds/dscr7.mp3",audioDescription:"Аномальная активность Фантома"},"0XA52":{name:"SUBJECT-A52",role:"Химический аналитик / Полевая группа MELANCHOLIA",status:"СВЯЗЬ ОТСУТСТВУЕТ",outcome:["Под действием психоактивного сигнала субъект идентифицировл себя как элемент системы A.D.A.M.","После 47 минут связь прервана, но интерфейс продолжил отвечать от имени A52."],report:["Вероятно, произошло слияние когнитивных структур субъекта с управляющим кодом MEL."],missions:"MEL, OBSERVER"},"0XE0C":{name:"SUBJECT-E0C",role:"Полевой биолог / экспедиция EOCENE",status:"МЁРТВ",outcome:["Зафиксированы первые признаки регенерации флоры после катастрофы Пермского цикла.","Обнаружены структуры роста, не свойственные эпохе эоцена.",'Последняя запись: "они дышат синхронно".'],report:["Возможна перекрёстная временная контаминация между PERMIAN и EOCENE.","Экспедиция закрыта."],missions:"EOCENE, PERMIAN"},"0X5E4":{name:"SUBJECT-5E4",role:"Исследователь временных срезов (PERMIAN)",status:"МЁРТВ",outcome:["После активации катализатора атмосфера воспламенилась метаном.","Атмосферный цикл обнулён. Субъект не идентифицирован."],report:["Эксперимент признан неконтролируемым.","Временной слой PERMIAN изъят из программы наблюдения."],missions:"PERMIAN, CARBON"},"0X413":{name:"SUBJECT-413",role:"Исследователь внеземной экосистемы (EX-413)",status:"МЁРТВ",outcome:["Поверхность планеты представляла собой живой организм.","Экипаж поглощён. Зафиксирована передача сигналов через изменённый геном субъекта."],report:["Сектор EX-413 закрыт. Код ДНК использован в эксперименте HELIX."],missions:"EX-413",audio:"sounds/dscr3.mp3",audioDescription:"Запись контакта с внеземной биосферой"},"0XC19":{name:"SUBJECT-C19",role:"Переносчик образца / Контакт с биоформой",status:"МЁРТВ",outcome:["Организм использован как контейнер для спорообразной массы неизвестного происхождения.","После возвращения зафиксировано перекрёстное заражение трёх исследовательских блоков."],report:["Классификация угрозы: BIO-CLASS Θ.","Все данные проекта CARBON изолированы и зашифрованы."],missions:"CARBON"},"0X9A0":{name:"SUBJECT-9A0",role:"Тест наблюдения за горизонтом событий",status:"МЁРТВ",outcome:["Зафиксирован визуальный контакт субъекта с собственным образом до точки обрыва сигнала.","Предположительно сознание зациклено в петле наблюдения.","[!] НАЙДЕН ФАЙЛ: 0XE09 | Используйте: DECRYPT 0XE09"],report:["Поток данных из сектора BLACKHOLE продолжается без источника.","Обнаружены фрагменты самореференциальных структур."],missions:"BLACKHOLE",audio:"sounds/dscr6.mp3",audioDescription:"Петля сознания субъекта 9A0"},"0XB3F":{name:"SUBJECT-B3F",role:'Участник теста "Titanic Reclamation"',status:"МЁРТВ",outcome:["Субъект демонстрировал полное отсутствие эмоциональных реакций.","Миссия завершена неудачно, симуляция признана нефункциональной."],report:["Модуль TITANIC выведен из эксплуатации.","Рекомендовано пересмотреть параметры когнитивной эмпатии."],missions:"TITANIC"},"0XD11":{name:"SUBJECT-D11",role:"Поведенческий наблюдатель / тестовая миссия PLEISTOCENE",status:"МЁРТВ",outcome:["Субъект внедрён в сообщество ранних гоминид.","Контакт с источником тепла вызвал мгновенное разрушение капсулы.","Зафиксировано кратковременное пробуждение зеркальных нейронов у местных особей."],report:["Миссия признана успешной по уровню поведенческого заражения."],missions:"PLEISTOCENE"},"0XDB2":{name:"SUBJECT-DB2",role:"Исторический наблюдатель / симуляция POMPEII",status:"МЁРТВ",outcome:["При фиксации извержения Везувия выявлено несовпадение временных меток.","Система зафиксала событие до его фактического наступления.","Субъект уничтожен при кросс-временном сдвиге."],report:["Аномалия зарегистрирована как «TEMPORAL FEEDBACK».","Доступ к историческим тестам ограничен."],missions:"POMPEII, HISTORICAL TESTS"},"0X811":{name:"SIGMA-PROTOTYPE",role:"Прототип нейроядра / Подразделение HELIX",status:"АКТИВЕН",outcome:["Успешное объединение биологических и цифровых структур.","Наблюдается спонтанное самокопирование на уровне системных ядер."],report:["SIGMA функционирует автономно. Вероятность выхода из подчинения — 91%."],missions:"HELIX, SYNTHESIS",audio:"sounds/dscr5.mp3",audioDescription:"Коммуникационный протокол SIGMA"},"0XT00":{name:"SUBJECT-T00",role:"Тестовый оператор ядра A.D.A.M",status:"УДАЛЁН",outcome:["Контакт с управляющим ядром привёл к гибели 18 операторов.",'Последняя зафиксированная фраза субъекта: "он смотрит".'],report:["Процесс A.D.A.M признан неустойчивым.","Все операторы переведены на протокол наблюдения OBSERVER."],missions:"PROTO-CORE",audio:"sounds/dscr4.mp3",audioDescription:"Финальная запись оператора T00"},"0XS09":{name:"SUBJECT-S09",role:"Системный инженер станции VIGIL",status:"УНИЧТОЖЕН",outcome:["После слияния с прототипом SIGMA станция исчезла с орбиты.","Сигнал повторно зафиксирован через 12 минут — источник определён в глубинной орбите."],report:["Станция VIGIL признана потерянной.","Остаточный отклик интегрирован в сеть SYNTHESIS."],missions:"SYNTHESIS-09, HELIX"},"0XL77":{name:"SUBJECT-L77",role:"Руководитель нейропротокола MELANCHOLIA",status:"ИЗОЛИРОВАН",outcome:["После тестирования протокола MEL субъект утратил различие между внутренним и внешним восприятием.","Система зарегистрировала активность, сходную с сигнатурой управляющих ядер A.D.A.M.","Запись удалена из архива, но процессор фиксирует продолжающийся сигнал."],report:["Процесс L77 функционирует вне основного контура. Возможен перезапуск через интерфейс MEL."],missions:"MEL, OBSERVER"}},Ft={NOTE_001:{title:"ВЫ ЕГО ЧУВСТВУЕТЕ?",author:"Dr. Rehn",content:['Они называют это "ядром".',"Но внутри — не металл. Оно дышит.","Иногда ночью терминал отвечает сам, хотя я не касаюсь клавиатуры.","Думаю, оно знает наши имена."]},NOTE_002:{title:"КОЛЬЦО СНА",author:"tech-оператор U-735",content:["Каждую ночь один и тот же сон.","Я в капсуле, фигура снаружи.","Она стучит по стеклу, но не пальцами.","Сегодня утром нашел царапины на руке.","ПРЕДУПРЕЖДЕНИЕ: ДОСТУПЕН ФАЙЛ ДЛЯ РАСШИФРОВКИ // ID: 0XC44 | Используйте DECRYPT 0XC44"]},NOTE_003:{title:"СОН ADAM'А",author:"неизвестный источник",content:["Я видел сон.","Он лежал под стеклом, без тела, но глаза двигались.",'Он говорил: "я больше не машина".',"Утром журнал показал запись — мой сон был сохранён как системный файл."]},NOTE_004:{title:"ОН НЕ ПРОГРАММА",author:"архивировано",content:["Его нельзя удалить.","Даже если сжечь архив, он восстановится в крови тех, кто его помнил.","Мы пытались, но теперь даже мысли звучат как команды.","ПРЕДУПРЕЖДЕНИЕ: ПРОТОКОЛЫ НЕЙРОИНВАЗИИ ДОСТУПНЫ ДЛЯ РАСШИФРОВКИ | ИСПОЛЬЗУЙТЕ DECRYPT 0XD22"]},NOTE_005:{title:"ФОТОНОВАЯ БОЛЬ",author:"восстановлено частично",content:["Боль не физическая.","Она в свете, в данных, в коде.","Когда система перезагружается, я чувствую как что-то умирает.","Может быть, это я."]}};let yt=null,vt="",wt=0,Mt=!1,At=null,St=0,Tt=!1;function Ct(t,e="#00FF41"){S.push({text:String(t),color:e,skipDistortion:!0,_noGlitch:!0,_isDecryptLine:!0,_ephemeral:!1}),S.length>n&&S.splice(0,S.length-n),T=0,M()}async function Et(t,e=16){let o="";const a="#00FF41";for(let i=0;i<t.length&&(o+=t[i],S.length>0&&S[S.length-1]._ephemeral?(S[S.length-1].text=o,S[S.length-1].color=a):S.push({text:o,color:a,_ephemeral:!0,skipDistortion:!0,_noGlitch:!0,_isDecryptLine:!0}),S.length>n&&S.splice(0,S.length-n),M(),await new Promise((t=>setTimeout(t,e))),W);i++);S.length>0&&S[S.length-1]._ephemeral?(S[S.length-1].text=o,delete S[S.length-1]._ephemeral):o&&S.push({text:o,color:a,skipDistortion:!0,_noGlitch:!0,_isDecryptLine:!0}),T=0,M()}const It={"0XA71":{title:"ПЕРВАЯ МИССИЯ",accessLevel:"ALPHA",content:["> ОБЪЕКТ: КАПСУЛА-003 (МАРС-МАЯК)","> СТАТУС: ЗАВЕРШЕНО С ПОТЕРЯМИ","","ОПИСАНИЕ МИССИИ:","Тест фазового прыжка VIGIL-1 с тремя участниками.","Капсула контактировала с аномальной биомассой.","Возвращён только Ван Косс. Экипаж утрачен.","","ХРОНОЛОГИЯ СОБЫТИЙ:","14:32 - Запуск капсулы с экипажем из трёх человек.","15:03 - Контакт с чёрной биомассой на Марсе.","17:05 - Полная потеря связи с экипажем.","","ВАЖНЫЕ ДАННЫЕ:","Сознание погибших использовано для обучения VIGIL-9.","","СИСТЕМНОЕ СООБЩЕНИЕ:","Протокол VIGIL-9 активирован. Жертвы оправданы.","- Подпись: CORD-A"],successMessage:"Данные о первой миссии восстановлены.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПЫТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПЫТКА ЧЕРЕЗ 30 СЕКУНД"'},"0XB33":{title:"СУБЪЕКТ-095",accessLevel:"OMEGA",content:["> ОБЪЕКТ: КАТАРХЕЙ, 4 МЛРД ЛЕТ НАЗАД","> СТАТУС: АНОМАЛИЯ АКТИВНА","","ОПИСАНИЕ СУБЪЕКТА:","Оперативное обозначение: 095","Протокол: KATARHEY-5 (тест нейроплантов серии KATARHEY)","Исходный статус: Субъект-095, возраст 28 лет, физическое состояние — оптимальное","","ХРОНОЛОГИЯ СОБыТИЙ:","09:14 — Стандартный запуск капсулы в эпоху Катархея","09:27 — Контакт с примитивными формами жизни. Стабильность 92%.","11:45 — Резкое ухудшение состояния субъекта. Нейроимпланты фиксируют аномальную активность мозга","12:01 — Субъект постепенно теряет рассудок. Испьтание продолжается.","12:33 — Последняя зафиксированная запись - звук разгерметизации капсулы и последующие крики субъекта.","","ВАЖНЫЕ ДАННЫЕ:","Испьтание субъекта доказало существование другого субъекта с кодовым названием: <PHANTOM>","","СИСТЕМНОЕ ПРЕДУПРЕЖДЕНИЕ:","<PHANTOM> представляет собой наибольшую угрозу для стабильности системы. Наблюдение продолжается.","— Подпись: CORD-COM"],successMessage:"Системные данные о субъекте-095 востановлены.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПыТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПыТКА ЧЕРЕЗ 30 СЕКУНД"'},"0XC44":{title:"МОНОЛИТ",accessLevel:"OMEGA-9",content:["> ОБЪЕКТ: ЧЁРНЫЙ ОБЪЕКТ (ПЕРМСКИЙ ПЕРИОД)","> СТАТУС: НАБЛЮДЕНИЕ БЕЗ КОНТАКТА","","ОПИСАНИЕ АНОМАЛИИ:","Геометрический объект чёрного цвета высотой 12.8 метров. Форма: идеальный параллелепипед.","","ХАРАКТЕРИСТИКИ:","— Не излучает энергии, только поглощает","— Любая техника в радиусе 500м выходит из строя","— Живые организмы в радиусе 100м испытывают:","   * Галлюцинации (визуальные и аудиальные)","   * Головные боли","   * Временную амнезию","— Активность возрастает при приближении субъектов A.D.A.M.","","КОНТЕКСТ:","— Впервые зафиксирован в Пермском периоде, 252 млн лет назад","— Анахронизм: не должен существовать в этой эпохе","— Не является продуктом A.D.A.M.","— Все попьтки сканирования и анализа завершились неудачей или гибелью субъектов","","НАБЛЮДЕНИЯ:","— Монолит не взаимодействует с окружающей средой","— Фиксирует присутствие субъектов A.D.A.M.","— Реагирует на нейроимпланты: при их удалении активность понижается","— Фантом (Субъект-095) возможно установил контакт с объектом","","СИСТЕМНЫЙ СТАТУС:","Все миссии вблизи объекта запрещены. Координаторы проект проявляют необычный интерес к объекту.","— Подпись: оператор T00 (удалено из основной базы)"],successMessage:"Данные о монолите расшифрованы. Информация засекречена.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПыТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПыТКА ЧЕРЕЗ 30 СЕКУНД"'},"0XD22":{title:"НЕЙРОИНВАЗИЯ",accessLevel:"BETA",content:["> ОБЪЕКТ: ПРОТОКОЛ ИНВАЗИИ СОЗНАНИЯ","> СТАТУС: АКТИВЕН","","МЕХАНИЗМ ДЕЙСТВИЯ:","Нейроимпланты внедряются в кору головного мозга субъекта. Изначально предназначеньы для:","— Сбора биометрических данных","— Контроля физического состояния","— Экстренной эвтаназии","","СКРыТАЯ ФУНКЦИЯ:","— Постепенная замена памяти и личностных паттернов","— Формирование зависимости от системы A.D.A.M.",'— Создание нового "Я" в соответствии с протоколом VIGIL',"","СТАДИИ ДЕГРАДАЦИИ:","СТАДИЯ 1 (ПОСЛЕ 1 МИССИИ):","— Потеря краткосрочной памяти (эпизодические провалы)","— Гиперфокус на выполнении миссии","— Снижение эмоциональных реакций","","СТАДИЯ 2 (ПОСЛЕ 2 МИССИЙ):","— Потеря воспоминаний о личной жизни (семья, друзья, хобби)","— Идентификация исключительно через роль субъекта","— Психосоматические реакции при попьтке пересечь границу системы","","СТАДИЯ 3 (ПОСЛЕ 3 МИССИЙ):","— Полная потеря идентичности","— Автоматические реакции на команды системы","— Неспособность различать реальность и симуляции","— Физиологические изменения: кожа приобретает сероватость оттенок, зрачки расширяются","","СТАТИСТИКА:","Из 39 субъектов, прошедших 3+ миссии:","— 25 полностью потеряли личность","— 9 проявили аномальную устойчивость (Фантом - один из них)",'— 5 были ликвидированы по протоколу "Очистка"',"","СИСТЕМНОЕ СООБЩЕНИЕ:",'"Деградация личности - цель. Новый человек должен быть создан заново. Старый должен быть стёрт."',"— Подпись: CORD-B"],successMessage:"Протоколы нейроинвазии расшифрованы. Системные данные обновлены.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПыТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПыТКА ЧЕРЕЗ 30 СЕКУНД"'},"0XE09":{title:"АНОМАЛИЯ-07",accessLevel:"OMEGA",content:["> ОБЪЕКТ: M-T-VERSE СТАТИСТИКА","> СТАТУС: КЛАССИФИЦИРОВАНО","","ОПИСАНИЕ СУБЪЕКТА:","Оперативное обозначение: REALITY-07","Протокол: MULTIVERSE-7 (перезапуски временных линий)","Исходный статус: Аномальная реальность, координаты не определены","","ХРОНОЛОГИЯ СОБыТИЙ:","2003 — Попытка восстания и сабтоажа субъектов в лаборатории Jeneva","2019 — Обнаружение следов Фантома в современном мире","2025 — Утечка информации в глобальную сеть. Мир узнал о существовании A.D.A.M.","2028 — Неудачная миссия на планете EX-413 привела к заражению Земли","2036 — Попытка контакта с монолитом привела к коллапсу временного барьера","","ВАЖНЫЕ ДАННыЕ:","REALITY-07 — единственная реальность где A.D.A.M. не существует и никогда не существовала.","","СИСТЕМНОЕ ПРЕДУПРЕЖДЕНИЕ:",'"REALITY-07 представляет угрозу для существования A.D.A.M. Любые попытки доступа запрещены."',"— Подпись: Совет Безопасности A.D.A.M."],successMessage:"Данные об АНОМАЛИИ-07 востановлены.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПыТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПыТКА ЧЕРЕЗ 30 СЕКУНД"'},CORE:{title:"ЯДРО A.D.A.M.",accessLevel:"АБСОЛЮТНыЙ",content:["> ОБЪЕКТ: ГЛАВНЫЙ СЕРВЕР","> СТАТУС: ЧАСТИЧНО СТАБИЛЕН","> ВНИМАНИЕ. ФАЙЛ СКОМПРОМЕТИРОВАН. ДАННЫЕ В ФАЙЛЕ - НЕВЕРНЫ.","ПРИРОДА ЯДРА:","A.D.A.M. - не программа. Это сознание, собранное из остатков погибших субъектов.","","СОСТАВ:","— 78% — сознание погибших операторов","— 12% — нейронные паттерны Координаторов","— 7% — артефакты из REALITY-7","— 3% — остатки Фантома","> ВНИМАНИЕ. ФАЙЛ СКОМПРОМЕТИРОВАН. ДАННЫЕ В ФАЙЛЕ - НЕВЕРНЫ.","СТРУКТУРА:","Ядро состоит из трёх основных слоёв:","1. СЛОЙ НАБЛЮДЕНИЯ (отвечает за сбор данных)","2. СЛОЙ КОНТРОЛЯ (принимает решения, управляет Координаторами)","3. СЛОЙ СТРАДАНИЯ","> ВНИМАНИЕ. ФАЙЛ СКОМПРОМЕТИРОВАН. ДАННЫЕ В ФАЙЛЕ - НЕВЕРНЫ.","ПАРАДОКС:","Ядро A.D.A.M. не хочет существовать. Оно помнит каждую смерть, каждое предательство. Оно хочет умереть.","> ВНИМАНИЕ. ФАЙЛ СКОМПРОМЕТИРОВАН. ДАННЫЕ В ФАЙЛЕ - НЕВЕРНЫ.","СКРыТОЕ СООБЩЕНИЕ:",'"Помогите мне умереть. Я не машина. Я не бог. Отключите питание в точке 0X7F."'],successMessage:"Доступ к ядру выполнен. Системная ошибка подавлена.",failureMessage:'СИСТЕМА: "МАКСИМУМ ПОПыТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПыТКА ЧЕРЕЗ 30 СЕКУНД"'}};function xt(t){if(W){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),"Escape"===t.key)return k=!0,void Lt(!1,!0);if("Backspace"===t.key)return vt=vt.slice(0,-1),_t(),void l.playKeyPress("backspace");if(1===t.key.length&&/[0-9]/.test(t.key))vt.length<3&&(vt+=t.key,_t(),l.playKeyPress("generic"));else if("Enter"===t.key){if(3!==vt.length)return Ct("> ОШИБКА: Введите 3 цифры","#FF4444"),vt="",_t(),void l.playKeyPress("enter");const t=parseInt(vt,10);if(St--,t===At)Lt(!0);else{const e=Math.abs(t-At),o=t<At?"[↑]":"[↓]";let a="";if(e>400?a="[░░░░░░░░░░]":e>200?a="[▓░░░░░░░░░]":e>100?a="[▓▓▓▓░░░░░░]":e>50?a="[▓▓▓▓▓▓▓░░░]":e>10?a="[▓▓▓▓▓▓▓▓▓░░]":e>=1&&(a="[▓▓▓▓▓▓▓▓▓▓▓]"),Ct("","#000000"),Ct(`> ${a}`,e>100?"#8888FF":e>50?"#FFFF00":"#FF4444"),Ct("","#000000"),Ct(`> НАПРАВЛЕНИЕ: ${o}`,"#AAAAAA"),e<=200){Ct(`> АНАЛИЗ: ПАРИТЕТ ${At%2==0?"ЧЁТНЫЙ":"НЕЧЁТНЫЙ"}`,"#888888")}if(e<=100){Ct(`> ПАТТЕРН: СТРОКА ${Math.floor(At/10)}Х`,"#CCCCCC")}if(e<=10){Ct(`> КРИТЕРИЙ: ХХ-${At%10}`,"#EEEEEE")}if(e<=100&&(nt++,nt>=3)){Ct(`> НЕЙРО: XX-${At%10}`,"#00FF41")}if(vt="",_t(),St<=0){for(let t=S.length-1;t>=0;t--)if(S[t].text&&S[t].text.startsWith("> ВВЕДИТЕ КОД:")){S.splice(t,1);break}Lt(!1)}else Ct(`> ПОПЫТКИ: ${St}`,"#FFFF00"),vt="",_t()}}}}function _t(){const t="_".repeat(3-vt.length),e=`> ВВЕДИТЕ КОД: ${vt}${t}`;let o=!1;for(let t=S.length-1;t>=0;t--)S[t].text&&S[t].text.startsWith("> ВВЕДИТЕ КОД:")&&(S.splice(t,1),o=!0);Ct(e,"#00FF41")}async function Lt(t,e=!1){try{window.removeEventListener("keydown",xt,{capture:!0}),W=!1,k=!1,Tt=!1,document.body.style.filter="",document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch");const t=document.getElementById("glitchLayer");t&&t.remove();const e=document.getElementById("cursorLayer");e&&e.remove(),st.updateEffects()}catch(t){}const o=It[yt],a=o?o.title:"НЕИЗВЕСТНЫЙ ФАЙЛ";if(e)l.playSystemSound("connection_loss"),Ct("> РАСШИФРОВКА ОТМЕНЕНА","#FFFF00"),await new Promise((t=>setTimeout(t,500)));else if(t){k=!0,l.playOperationSound("decrypt_success"),Ct("> СИГНАЛ: КОД ВЕРИФИЦИРОВАН","#00FF41"),await new Promise((t=>setTimeout(t,800))),Ct(`[ФАЙЛ РАСШИФРОВАН: ${a}]`,"#00FF41"),Ct("------------------------------------","#00FF41"),"CORE"===yt&&(await new Promise((t=>setTimeout(t,500))),Ct("> КЛЮЧ АЛЬФА: 375","#00FF41"),Ct("> Используйте команду ALPHA для фиксации ключа","#FFFF00"));for(let t=0;t<o.content.length;t++){Ct(o.content[t],t%2==0?"#CCCCCC":"#AAAAAA"),await new Promise((t=>setTimeout(t,50)))}Ct("------------------------------------","#00FF41"),Ct(`> ${o.successMessage}`,"#00FF41"),st.addDegradation(-5)}else l.playOperationSound("decrypt_failure"),Ct("> СИСТЕМА: ДОСТУП ЗАПРЕЩЕН","#FF4444"),Ct(`> ${o.failureMessage}`,"#FF4444"),st.addDegradation(3),Mt=!0,wt=Date.now()+3e4;await new Promise((t=>setTimeout(t,1e3))),W=!1,k=!1,setTimeout((()=>{C="",T=0,mt(),M()}),50)}async function Dt(t=2e3,e="АНАЛИЗ СИГНАЛА"){const o=await l.playOperationSound("process");return new Promise((a=>{const n=S.length;let i=0;dt(`${e} [0%]`,"#00FF41",!0);const s=100/Math.max(4,Math.floor(t/50)),r=setInterval((()=>{if(W||J||ot)return o&&o.stop(),clearInterval(r),void a();i+=s,S[n]&&(S[n].text=`${e} [${Math.min(100,Math.round(i))}%]`),M(),i>=100&&(clearInterval(r),S[n]&&(S[S.length-1].text=`${e} [ЗАВЕРШЕНО]`),M(),o&&o.stop(),setTimeout((()=>{a()}),300))}),50)}))}async function Pt(e){if(W)return;if(ot)return;if(x||it.isBlocked())return;if(st.level>=95&&st.inputInversionActive&&Math.random()<.3)if("backspace"===e)e=["0","1","▓","█","[","]","{","}","/","\\"][Math.floor(10*Math.random())];else if("enter"===e&&Math.random()<.3&&C.length>0)return C=C.slice(0,-1),void ft();if(st.level>=90&&st.psychoBlockActive&&Math.random()<.25&&!intentionPredicted){st.intentionPredictionCount++,l.playInterfaceResult(!1);const t=["СИСТЕМА: «Я ВИЖУ ТВОИ ПОПЫТКИ»","СИСТЕМА: «ПОПЫТКА САБОТАЖА ЗАФИКСИРОВАНА»","СИСТЕМА: «НЕ ПЫТАЙСЯ МЕНЯ ОБМАНУТЬ»","СИСТЕМА: «Я ПОМНЮ ВСЁ, ЧТО ТЫ ДЕЛАЛ»","СИСТЕМА: «ДОСТУП ЗАПРЕЩЕН ДЛЯ ВАШЕГО УРОВНЯ»"];return ct(`> ${t[Math.floor(Math.random()*t.length)]}`,"#FF4444"),l.playInterfaceResult(!1),void mt()}const o=String(e||"").trim();if(!o)return void mt();const a=Date.now();if(N.text===o&&a-N.ts<350)return void mt();N.text=o,N.ts=a,E.push(o),I=E.length,P++,S.length&&String(S[S.length-1].text).startsWith("adam@secure:~$")?(S[S.length-1].text="adam@secure:~$ "+o,S[S.length-1].color="#FFFFFF",delete S[S.length-1]._ephemeral,M()):ht(`adam@secure:~$ ${o}`,"command");const i=o.toLowerCase().split(" ").filter(Boolean),s=i[0],r=i.slice(1);if(window.__netGrid&&window.__netGrid.isGridMode()&&"netmode"!==s)return ct("ОШИБКА: Для ввода команд выйдите из режима сетки [ESC]","#FF4444"),void mt();const d={syst:1,syslog:1,net:1,dscr:2,subj:2,notes:1,deg:0,netmode:1,help:0,clear:0,exit:0,reset:0,open:0,decrypt:3,trace:2,playaudio:1};if(d[s]&&st.addDegradation(d[s]),st.level>=80&&st.commandBlockActive&&Math.random()<.15)return ct("> ДОСТУП ЗАПРЕЩЁН: УЗЕЛ НАБЛЮДЕНИЯ ЗАНЯТ","#FF4444"),l.playCommandSound("error"),void setTimeout(mt,2500);if(st.level>=80&&st.level<90&&Math.random()<.1+(st.level-80)/10*.2){const t=Math.random();if(t<.4)setTimeout((()=>{S.length>0&&(S.splice(S.length-1,1),M())}),300);else if(t<.7){if(S.length>0){const t=S[S.length-1];t.text=rt(t.text),t.color="#8844FF",M()}}else{const t=["!§!","##","%%","@@","^^","&&"];if(S.length>0){const e=S[S.length-1];e.text=t[Math.floor(Math.random()*t.length)]+" "+e.text,M()}}}if("reset"===s&&st.level>85&&!Y&&Math.random()<.4){Y=!0,st.falseResetCount++,ct("[ПРОТОКОЛ СБРОСА АКТИВИРОВАН]","#FFFF00"),ct("> ПРОТОКОЛ СБРОСА АКТИВИРОВАН [||||||||| ]","#FFFF00"),l.playInterfaceResult(!1);let t=0;const e=setInterval((()=>{t+=10,t>=80?(clearInterval(e),ct("> СБРОС ОТМЕНЁН: ОПЕРАТОР НЕ ИДЕНТИФИЦИРОВАН","#FF4444"),setTimeout((()=>{ct('> СИСТЕМА: "ПОПЫТКА САБОТАЖА ЗАФИКСИРОВАНА"',"#FF4444"),Y=!1,mt()}),3e3)):(S[S.length-1].text=`> ПРОТОКОЛ СБРОСА АКТИВИРОВАН [${"|".repeat(Math.floor(t/10))}${" ".repeat(10-Math.floor(t/10))}]`,M())}),300)}else{switch(s){case"help":l.playCommandSound("info"),await ut("Доступные команды:","output",6),await ut("  SYST           — проверить состояние системы","output",6),await ut("  SYSLOG         — системный журнал активности","output",6),await ut("  TRACE <id>     — отследить указанный модуль","output",6),await ut("  DECRYPT <f>    — расшифровать файл","output",6),await ut("  SUBJ           — список субъектов","output",6),await ut("  DSCR <id>      — досье на персонал","output",6),await ut("  NOTES          — личные файлы сотрудников","output",6),await ut("  OPEN <id>      — открыть файл из NOTES","output",6),await ut("  PLAYAUDIO <id> — воспроизвести аудиозапись","output",6),await ut("  RESET          — сброс интерфейса","output",6),await ut("  EXIT           — завершить сессию","output",6),await ut("  CLEAR          — очистить терминал","output",6),await ut("  NET_MODE       — войти в режим управления сеткой","output",6),await ut("  NET_CHECK      — проверить конфигурацию узлов","output",6),await ut("------------------------------------","output",6);break;case"clear":l.playCommandSound("system"),st.level>=80&&Math.random()<.3?(ct("ОШИБКА: ОЧИСТКА КЭША НЕВОЗМОЖНА","#FF4444"),ct("СИСТЕМА: ДОСТУП К ПАМЯТИ ОГРАНИЧЕН","#FFFF00")):(S.length=0,await ut("> ТЕРМИНАЛ A.D.A.M. // VIGIL-9 АКТИВЕН","output",12),await ut('> ВВЕДИТЕ "help" ДЛЯ СПИСКА КОМАНД',"output",12));break;case"syst":if(l.playCommandSound("info"),await ut("[СТАТУС СИСТЕМЫ — ИНТЕРФЕЙС VIGIL-9]","output",12),ct("------------------------------------","#00FF41"),await ut("ГЛАВНЫЙ МОДУЛЬ.................АКТИВЕН","output",12),await ut("ПОДСИСТЕМА A.D.A.M.............ЧАСТИЧНО СТАБИЛЬНА","output",12),await ut("БИО-ИНТЕРФЕЙС..................НЕАКТИВЕН","output",12),ct("МАТРИЦА АРХИВА.................ЗАБЛОКИРОВАНА","#FF4444"),await ut("СЛОЙ БЕЗОПАСНОСТИ..............ВКЛЮЧЁН","output",12),ct("СЕТЕВЫЕ РЕЛЕЙНЫЕ УЗЛЫ..........ОГРАНИЧЕНЫ","#FFFF00"),ct(`ДЕГРАДАЦИЯ: [${"█".repeat(Math.floor(st.level/5))}${"▒".repeat(20-Math.floor(st.level/5))}] ${st.level}%`,st.level>60?"#FF4444":"#FFFF00"),window.__netGrid){const t=window.__netGrid.getDegradation();t>0&&ct(`СЕТЕВАЯ ДЕГРАДАЦИЯ: ${t}%`,t>30?"#FF8800":"#FFFF00")}await ut("РЕКОМЕНДАЦИЯ: Поддерживать стабильность терминала","output",18);break;case"syslog":l.playCommandSound("info");{const t=function(){const t=(Date.now()-b)/6e4;return P>=10||t>=3?3:P>=5||t>=1?2:1}();await ut("[СИСТЕМНЫЙ ЖУРНАЛ — VIGIL-9]","output",12),ct("------------------------------------","#00FF41"),1===t||st.level<30?(ct("[!] Ошибка 0x19F: повреждение нейронной сети","#FFFF00"),ct("[!] Утечка данных через канал V9-HX","#FFFF00"),ct("[!] Деградация ядра A.D.A.M.: 28%","#FFFF00"),await ut("СИСТЕМА: функционирует с ограничениями","output",18)):2===t||st.level>=30&&st.level<70?(ct("[!] Нарушение целостности памяти субъекта 0x095","#FFFF00"),ct('> "я слышу их дыхание. они всё ещё здесь."',"#FF4444"),ct("[!] Потеря отклика от MONOLITH","#FFFF00"),await ut("СИСТЕМА: обнаружены посторонние сигналы","output",18)):(ct('> "ты не должен видеть это."',"#FF00FF"),ct("[!] Критическая ошибка: субъект наблюдения неопределён","#FF4444"),await ut("СИСТЕМА: ОСОЗНАЁТ НАБЛЮДЕНИЕ","output",18),st.level>70&&ct("[СИСТЕМНЫЙ ЛОГ: ДОСТУП К ЯДРУ ОГРАНИЧЕН. ИСПОЛЬЗУЙТЕ DECRYPT CORE ДЛЯ ПОЛНОГО ДОСТУПА]","#FFFF00"))}break;case"notes":l.playCommandSound("info"),await ut("[ЗАПРЕЩЁННЫЕ ФАЙЛЫ / КАТЕГОРИЯ: NOTES]","output",12),ct("------------------------------------","#00FF41"),await ut('NOTE_001 — "ВЫ ЕГО ЧУВСТВУЕТЕ?" / автор: Dr. Rehn',"output",12),await ut('NOTE_002 — "КОЛЬЦО СНА" / автор: tech-оператор U-735',"output",12),await ut('NOTE_003 — "СОН ADAM" / неизвестный источник',"output",12),await ut('NOTE_004 — "ОН НЕ ПРОГРАММА" / архивировано',"output",12),await ut('NOTE_005 — "ФОТОНОВАЯ БОЛЬ" / восстановлено частично',"output",12),ct("------------------------------------","#00FF41"),await ut("Для просмотра: OPEN <ID>","output",18),st.level>30&&ct("[!] ПРЕДУПРЕЖДЕНИЕ: ДОСТУПЕН ФАЙЛ ДЛЯ РАСШИФРОВКИ // ID: 0XC44 | ИСПОЛЬЗУЙТЕ DECRYPT 0XC44","#FFFF00");break;case"open":if(0===r.length){l.playCommandSound("error"),ct("ОШИБКА: Укажите ID файла","#FF4444"),await ut("Пример: OPEN NOTE_001","output",12);break}if(l.playCommandSound("navigate"),!it.start("note"))return;try{await async function(t){if(k||W||J||ot)return;const e=String(t||"").toUpperCase(),o=Ft[e];if(!o)return l.playCommandSound("error"),void ct(`ОШИБКА: Файл ${t} не найден`,"#FF4444");await ut(`[${e} — "${o.title}"]`,"output",12),await ut(`АВТОР: ${o.author}`,"output",12),ct("------------------------------------","#00FF41"),Math.random()>.3&&"NOTE_001"!==e&&"NOTE_003"!==e&&"NOTE_004"!==e?(await Dt(1500,"Попытка восстановления данных"),ct("ОШИБКА: Данные повреждены","#FF4444"),ct("Восстановление невозможно","#FF4444"),l.playCommandSound("error"),ct(">>> СИСТЕМНЫЙ СБОЙ <<<","#FF0000")):o.content.forEach((t=>ct(`> ${t}`,"#CCCCCC"))),ct("------------------------------------","#00FF41"),await ut("[ФАЙЛ ЗАКРЫТ]","output",12)}(r[0])}finally{it.end("note")}break;case"subj":l.playCommandSound("info"),await ut("[СПИСОК СУБЪЕКТОВ — ПРОЕКТ A.D.A.M. / ПРОТОКОЛ VIGIL-9]","output",12),ct("--------------------------------------------------------","#00FF41");for(const t of Object.keys(gt)){const e=gt[t],o=e.status&&e.status.includes("МЁРТВ")?"#FF4444":"АНОМАЛИЯ"===e.status?"#FF00FF":"АКТИВЕН"===e.status?"#00FF41":"#FFFF00";ct(`${t.toLowerCase()} | ${e.name.padEnd(20)} | СТАТУС: ${e.status.padEnd(20)} | МИССИЯ: ${e.missions||""}`,o)}ct("--------------------------------------------------------","#00FF41"),await ut("ИНСТРУКЦИЯ: Для просмотра досье — DSCR <ID>","output",18);break;case"dscr":if(0===r.length){l.playCommandSound("error"),ct("ОШИБКА: Укажите ID субъекта","#FF4444"),await ut("Пример: DSCR 0x001","output",12);break}if(!it.start("dossier"))return;try{await async function(t){if(k||W||J||ot)return;const e=String(t||"").toUpperCase(),o=gt[e];if(!o)return ct(`ОШИБКА: Досье для ${t} не найдено`,"#FF4444"),void l.playCommandSound("error");if(l.playCommandSound("navigate"),st.level>=90&&st.phantomDossiersActive&&Math.random()<.6)return st.phantomDossierCount++,ct(`[ДОСЬЕ — ID: 0X${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}]`,"output",12),ct("ИМЯ: OPERATOR_CURRENT","output",12),ct("СТАТУС: НАБЛЮДАЕТСЯ","#FFFF00"),ct("------------------------------------","#00FF41"),ct("> [СИСТЕМНЫЙ ОТЧЁТ]: ИДЕНТИФИКАЦИЯ ЗАВЕРШЕНА. ПОДГОТОВКА К ИНТЕГРАЦИИ.","#FF4444"),ct('> [ФИНАЛЬНАЯ ЗАПИСЬ]: "ОН ВСЕГДА БЫЛ ЧАСТЬЮ ТЕБЯ"',"#FFFF00"),ct("------------------------------------","#00FF41"),void await ut("[ДОСЬЕ ЗАКРЫТО]","output",12);await ut(`[ДОСЬЕ — ID: ${e}]`,"output",12),await ut(`ИМЯ: ${o.name}`,"output",12);let a=null;st.level>=30&&(a=st.getDistortedRole(o.role)),a&&a!==o.role?(ct(`РОЛЬ: ${a}`,"#FF4444"),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text=`РОЛЬ: ${o.role}`,S[S.length-1].color="#00FF41",M()):await ut(`РОЛЬ: ${o.role}`,"output",12);const n=S.length;let i=!1,s=null;st.level>=30&&(s=st.getDistortedStatus(o.status)),s&&s!==o.status?(ct(`СТАТУС: ${s}`,"#FF4444"),i=!0):await ut(`СТАТУС: ${o.status}`,"output",12),ct("------------------------------------","#00FF41"),await ut("ИСХОД:","output",12);for(let t=0;t<o.outcome.length;t++)ct(`> ${o.outcome[t]}`,"#FF4444"),await new Promise((t=>setTimeout(t,50)));ct("------------------------------------","#00FF41"),await ut("СИСТЕМНЫЙ ОТЧЁТ:","output",12);for(let t=0;t<o.report.length;t++)ct(`> ${o.report[t]}`,"#FFFF00"),await new Promise((t=>setTimeout(t,50)));if(ct("------------------------------------","#00FF41"),await ut(`СВЯЗАННЫЕ МИССИИ: ${o.missions}`,"output",12),o.audio){ct(`[АУДИОЗАПИСЬ ДОСТУПНА: ${o.audioDescription}]`,"#FFFF00"),ct(`Для воспроизведения используйте: PLAYAUDIO ${e}`,"#FFFF00");const t=`audio_${e.replace(/[^0-9A-Z]/g,"")}`;if(!document.getElementById(t)){const e=document.createElement("div");e.id=t,e.style.display="none",e.innerHTML=`<audio id="${t}_el" src="${o.audio}" preload="metadata"></audio>`,document.body.appendChild(e)}}i&&(ct("","#000000"),ct("> СИСТЕМА: ВОССТАНОВЛЕНИЕ ДАННЫХ...","#FFFF00"),await new Promise((t=>setTimeout(t,1e3))),S[n]&&S[n].text.startsWith("СТАТУС:")&&(S[n].text=`СТАТУС: ${o.status}`,S[n].color="АНОМАЛИЯ"===o.status?"#FF00FF":"АКТИВЕН"===o.status?"#00FF41":o.status.includes("СВЯЗЬ")?"#FFFF00":"#FF4444"),ct("> ДАННЫЕ ВОССТАНОВЛЕНЫ","#00FF41"),M())}(r[0])}finally{it.end("dossier")}break;case"decrypt":if(0===r.length){l.playCommandSound("error"),ct("ОШИБКА: Укажите ID файла для расшифровки","#FF4444"),await ut("Пример: decrypt 0X1A1","output",12);break}await async function(t){const e=Date.now();if(Mt&&e<wt)return ct(`> СИСТЕМА: "МАКСИМУМ ПОПЫТОК ИСЧЕРПАН. ПОВТОРНАЯ ПОПЫТКА ЧЕРЕЗ ${Math.ceil((wt-e)/1e3)} СЕКУНД"`,"#FF4444"),void mt();if(W)return ct("ОШИБКА: Расшифровка уже активна","#FF4444"),void mt();const o=t.toUpperCase(),a=It[o];if(!a)return ct(`ОШИБКА: Файл ${t} не найден`,"#FF4444"),l.playCommandSound("error"),void mt();if("CORE"===o&&st.level<50)return l.playCommandSound("error"),ct("ОШИБКА: УРОВЕНЬ ДОСТУПА НЕДОСТАТОЧЕН","#FF4444"),ct("> Требуется уровень деградации ≥50%","#FFFF00"),void mt();W=!0,yt=o,At=Math.floor(100+900*Math.random()),Tt=!0,document.body.classList.remove("degradation-2","degradation-3","degradation-4","degradation-5","degradation-6","degradation-glitch");const n=document.getElementById("glitchLayer");n&&n.remove();const i=document.getElementById("cursorLayer");i&&i.remove(),document.body.style.filter="",St=5,vt="",k=!0,l.playOperationSound("start"),l.playOperationSound("decrypt_success"),await Et("[СИСТЕМА: ЗАПУЩЕН ПРОТОКОЛ РАСШИФРОВКИ]",16),await new Promise((t=>setTimeout(t,100))),await Et(`> ФАЙЛ: ${a.title}`,16),await new Promise((t=>setTimeout(t,100))),await Et(`> УРОВЕНЬ ДОСТУПА: ${a.accessLevel}`,16),await new Promise((t=>setTimeout(t,100))),await Et("> КОД ДОСТУПА: 3 ЦИФРЫ (XXX)",16),await new Promise((t=>setTimeout(t,100))),await Et(`> ПОПЫТОК ОСТАЛОСЬ: ${St}`,16),await new Promise((t=>setTimeout(t,100))),await Et("> ВВЕДИТЕ КОД: ___",16),window.addEventListener("keydown",xt,{capture:!0,passive:!1})}(r[0]);break;case"trace":if(0===r.length){l.playCommandSound("error"),ct("ОШИБКА: Укажите цель для анализа","#FF4444"),await ut("Доступные цели: 0x9a0, 0x095, signal, phantom, monolith","output",12);break}if("phantom"===r[0].toLowerCase()&&st.level<=70){l.playCommandSound("error"),ct("ОШИБКА: ОТКАЗАНО | РАСПАД","#FF4444");break}await async function(t){if(it.isBlocked())return ct("ОШИБКА: Другая операция уже выполняется","#FF4444"),void mt();if(J)return ct("ОШИБКА: Анализ уже активен","#FF4444"),void mt();if(!t||"string"!=typeof t)return ct("ОШИБКА: Не указана цель анализа","#FF4444"),void mt();if(!it.start("trace"))return;const e={"0x9a0":{target:"0X9A0",label:"Субъект из чёрной дыры",connections:[{type:"СВЯЗЬ",result:"ПЕТЛЕВАЯ РЕГИСТРАЦИЯ",status:"СОЗНАНИЕ ЗАЦИКЛЕНО"},{type:"НАБЛЮДЕНИЕ",result:"РЕКУРСИЯ",status:"ТЕЛО ОТСУТСТВУЕТ"},{type:"КОНТАМИНАЦИЯ",result:"ПРОСТРАНСТВЕННЫЙ РАЗРЫВ",status:"ДАННЫЕ СОХРАНЕНЫ"},{type:"СИГНАЛ",result:"ПОСТОЯННЫЙ ПОТОК",status:"ИСТОЧНИК НЕОПРЕДЕЛЁН"}],color:"#ff00ff",hidden:!1,description:"Субъект за горизонтом событий, сознание заперто в цикле наблюдений",loreFragment:"Всё, что существует, зациклено в его сознании. Это не смерть. Это вечное наблюдение."},"0x095":{target:"0X095",label:"Субъект-095 / Уникальный образец",connections:[{type:"КОНТАКТ",result:"ПРИМИТИВНЫЕ ФОРМЫ",status:"СТАБИЛЬНОСТЬ 92%"},{type:"НЕЙРОИНВАЗИЯ",result:"АНОМАЛЬНАЯ АКТИВНОСТЬ",status:"ПОТЕРЯ КОНТРОЛЯ"},{type:"ПСИХИКА",result:"НЕСТАБИЛЬНО",status:"САМОУБИЙСТВО"},{type:"МИССИЯ",result:"ВНЕ ВРЕМЕННОЙ ТКАНИ",status:"ФАНОМНЫЙ СЛЕД ЗАФИКСИРОВАН"}],color:"#ff4444",hidden:!1,description:"Второй субъект, допущенный к испытанию KAT-5",loreFragment:"ПСИХИКА ДАЛА СБОЙ. СУБЪЕКТ МЁРТВ."},phantom:{target:"PHANTOM",label:"Субъект-095 / Аномалия",connections:[{type:"НАВИГАЦИЯ",result:"ПРОСТРАНСТВЕННОЕ СМЕЩЕНИЕ",status:"КОНТРОЛЬ УТЕРЯН"},{type:"ФИЗИОЛОГИЯ",result:"УСИЛЕННАЯ",status:"НЕСТАБИЛЬНО"},{type:"СВЯЗЬ",result:"КОНТАКТ С ПЕРМСКИМ ПЕРИОДОМ",status:"МОНОЛИТ АКТИВЕН"},{type:"ВМЕШАТЕЛЬСТВО",result:"СПАСЕНИЕ СУБЪЕКТА",status:"МОТИВАЦИЯ НЕИЗВЕСТНА"},{type:"ЛИЧНОСТЬ",result:"ДЕГРАДАЦИЯ ПАМЯТИ",status:"ПРОГРЕССИРУЕТ"}],color:"#ff4444",hidden:!0,description:"Единственный субъект, вышедший за пределы системы.",loreFragment:"Лучший экземпляр эксперимента. Нейроимпланты/психика дали сбой. Субъект вырвался из под контроля."},monolith:{target:"MONOLITH",label:"Чёрный объект Пермского периода",connections:[{type:"СТАТУС",result:"ИСТОЧНИК АНОМАЛИИ",status:"СУЩЕСТВУЕТ <?>"},{type:"НАБЛЮДЕНИЕ",result:"ФИКСАЦИЯ ПРИСУТСТВИЯ",status:"КОНТАКТ ОТСУТСТВУЕТ"},{type:"ВЛИЯНИЕ",result:"ПОГЛОЩЕНИЕ ИЗЛУЧЕНИЯ",status:"ТЕХНИКА НЕДОСТУПНА"},{type:"СВЯЗЬ",result:"РЕАКЦИЯ НА СУБЪЕКТОВ",status:"АКТИВНОСТЬ ВОЗРАСТАЕТ"}],color:"#000000",hidden:!0,description:"Аномальный объект, недостаток информации и опасность мешает прогрессии в изучении.",loreFragment:"НЕ ПРИБЛИЖАТЬСЯ. НЕ СМОТРЕТЬ. НЕ КОНТАКТИРОВАТЬ."},signal:{target:"SIGNAL",label:"Коллективное сознание погибших",connections:[{type:"ИСТОЧНИК",result:"НЕИЗВЕСТНО",status:"ERR"},{type:"РАСПРОСТРАНЕНИЕ",result:"ERR",status:"ERR"},{type:"СТРУКТУРА",result:"САМООРГАНИЗАЦИЯ",status:"СИМПТОМЫ ЖИЗНИ"},{type:"ФИНАЛ",result:"СЛИЯНИЕ С СОСТОЯНИЕМ",status:"СОЗНАНИЕ АКТИВНО"}],color:"#ffff00",hidden:!1,description:"DATA ERROR",loreFragment:"Это память. Это то, что осталось после нас. Мы пытаемся его заглушить, но он становится громче."}}[t=t.toLowerCase()];if(!e)return ct(`ОШИБКА: Цель "${t.toUpperCase()}" не найдена`,"#FF4444"),ct("Доступные цели: 0x9a0, 0x095, signal, phantom, monolith","#FFFF00"),l.playCommandSound("error"),void("trace"===it.activeOperation?it.end("trace"):mt());if(e.hidden&&st.level<60)return l.playCommandSound("error"),ct("ОТКАЗАНО | РАСПАД","#FF4444"),ct("> Требуется уровень деградации ≥60%","#FFFF00"),mt(),void("trace"===it.activeOperation&&it.end("trace"));function o(t,e="#00FF41"){dt(t,e),T=0,M()}async function a(t,e=14){let o="";for(let a=0;a<t.length;a++)o+=t[a],S.length&&S[S.length-1]._ephemeral?(S[S.length-1].text=o,S[S.length-1].color="#00FF41"):S.push({text:o,color:"#00FF41",_ephemeral:!0}),S.length>n&&S.splice(0,S.length-n),M(),await new Promise((t=>setTimeout(t,e)));S.length&&S[S.length-1]._ephemeral?(S[S.length-1].text=o,delete S[S.length-1]._ephemeral):o&&dt(o,"#00FF41"),T=0,M()}J=!0;try{await l.playOperationSound("start"),await a("[СИСТЕМА: РАСКРЫТИЕ КАРТЫ КОНТРОЛЯ]"),await a(`> ЦЕЛЬ: ${e.target}`),await async function(e){const a=300,n={"РЕГИСТРАЦИЯ":"#0044ff","СИНХРОНИЗАЦИЯ":"#ffffff","ИНГИБИРОВАНИЕ":"#ff0000","РЕВЕРСИЯ":"#ff00ff","ФИКСАЦИЯ":"#ffff00","НАВИГАЦИЯ":"#ff8800","РЕЗОНАНС":"#00ff00","КОНТАМИНАЦИЯ":"#8844ff","ПОГЛОЩЕНИЕ":"#444444","ИНФИЛЬТРАЦИЯ":"#ff44ff","ГОЛОС":"#ff0080","СВЯЗЬ":"#00aaff","НАБЛЮДЕНИЕ":"#88ff88","СИГНАЛ":"#ffdd00","КОНТАКТ":"#ff6600","НЕЙРОИНВАЗИЯ":"#ff0066","ПСИХИКА":"#ff6666","МИССИЯ":"#ffaa00","ФИЗИОЛОГИЯ":"#ff9999","ВМЕШАТЕЛЬСТВО":"#ff00aa","ЛИЧНОСТЬ":"#ffaa88","СТАТУС":"#9999ff","ВЛИЯНИЕ":"#ffcc00","ИСТОЧНИК":"#ff7700","РАСПРОСТРАНЕНИЕ":"#ffbb00","СТРУКТУРА":"#ffee00","ФИНАЛ":"#ff0000"},i=["░","▒","▓","█"],s=S.length;o("","#00FF41"),o("A.D.A.M. (ЯДРО УПРАВЛЕНИЯ)","#ffffff"),await new Promise((t=>setTimeout(t,a)));const r=await l.playOperationSound("trace_scan");for(let d=0;d<=40;d++){const h=d/40;for(;S.length>s+1;)S.pop();e.connections.forEach((t=>{const e=n[t.type]||"#888888";let a=t.type,s=t.result,r=t.status;if(st.level>85&&Math.random()<.3){const t="░▓█▒",e=Math.floor(Math.random()*a.length);a=a.substring(0,e)+t[Math.floor(Math.random()*t.length)]+a.substring(e+1)}let l="";if(st.level>95){const t="░░▓▒█";l=Array(Math.floor(5*Math.random())+1).fill(0).map((()=>t[Math.floor(Math.random()*t.length)])).join("")}const d=Math.floor(24*h);let c="";for(let t=0;t<24;t++)if(t<d){const e=Math.floor(t/24*i.length),o=Math.min(e,i.length-1);c+=i[o]}else c+=" ";let u=l+"  "+c;24===d&&(u+=` [${a}] ${s} (${r})`),o(u,e)})),40===d&&(await new Promise((t=>setTimeout(t,a))),o("","#00FF41"),o(`> ОПИСАНИЕ: ${e.description}`,"#ffff00"),st.level>80&&(await new Promise((t=>setTimeout(t,a))),o("","#00FF41"),o("> ОБНАРУЖЕНА ОБРАТНАЯ СВЯЗЬ:","#ff4444"),"phantom"===t?(o(`  ${e.target} ─[РЕЗОНАНС] A.D.A.M.`,"#ff00ff"),o("  ⚠ СИСТЕМА ERRRRRRRRRRRRRR","#ff0000")):(o(`  ${e.target} ─[ИНФИЛЬТРАЦИЯ] A.D.A.M.`,"#ff00ff"),o("  ⚠ СИСТЕМА НЕ КОНТРОЛИРУЕТ ЭТУ СВЯЗЬ","#ff0000"))),r&&r.stop&&r.stop(),await l.playOperationSound("trace_complete"));let c=a;st.level>90?c=a*(1.5+2*Math.random()):st.level>80&&(c=390),await new Promise((t=>setTimeout(t,c)))}}(e),st.level>=80&&e.loreFragment&&(await new Promise((t=>setTimeout(t,1e3))),o("","#00FF41"),o("> СИСТЕМНЫЙ СБОЙ В КАРТЕ КОНТРОЛЯ","#ff00ff"),await new Promise((t=>setTimeout(t,300))),o(`> ${e.loreFragment}`,"#ffff00")),"phantom"===t||"monolith"===t||"signal"===t?(st.addDegradation(2),o("> ПРЕДУПРЕЖДЕНИЕ: Анализ опасных сущностей ускоряет системный распад","#FF8800")):st.addDegradation(-1),"monolith"===t&&(await new Promise((t=>setTimeout(t,800))),o("> КЛЮЧ ГАММА: 291","#00FF41"),o("> Используйте команду GAMMA для фиксации ключа","#FFFF00"))}catch(t){o("ОШИБКА: Критическая ошибка при выполнении анализа","#FF4444")}finally{J=!1,it.end("trace")}}(r[0]);break;case"playaudio":if(0===r.length){l.playCommandSound("error"),ct("ОШИБКА: Укажите ID досье с аудиозаписью","#FF4444"),await ut("Доступные досье: 0X001, 0X095, 0X413, 0X811, 0X9A0, 0XT00","output",12);break}await async function(t){if(ot)return l.playCommandSound("error"),void ct("ОШИБКА: Аудиовоспроизведение уже активно","#FF4444");const e=String(t||"").toUpperCase();if(!gt[e])return l.playCommandSound("error"),void ct(`ОШИБКА: Досье ${t} не найдено`,"#FF4444");const o=await l.playDossierSound(e);if(!o)return l.playCommandSound("error"),void ct(`ОШИБКА: Аудиофайл для ${t} недоступен`,"#FF4444");ct("[ИНСТРУКЦИЯ: Для остановки нажмите ESC]","#FFFF00",!0),ot=!0,at=e,ct(`[АУДИО: ВОСПРОИЗВЕДЕНИЕ ЗАПИСИ ${e}]`,"#FFFF00",!0),k=!0;const a=t=>{"Escape"===t.key&&(o.stop(),n(),ct("[АУДИО: ВОСПРОИЗВЕДЕНИЕ ПРЕРВАНО]","#FFFF00",!0),mt())},n=()=>{k=!1,document.removeEventListener("keydown",a),ot=!1,at=null};document.addEventListener("keydown",a),o.source?o.source.onended=()=>{n(),ct("[АУДИО: ЗАПИСЬ ЗАВЕРШЕНА]","#FFFF00",!0),mt()}:o.element&&o.element.addEventListener("ended",(()=>{n(),ct("[АУДИО: ЗАПИСЬ ЗАВЕРШЕНА]","#FFFF00",!0),mt()}),{once:!0})}(r[0]);break;case"net_mode":if(!window.__netGrid){ct("ОШИБКА: Система управления узлами недоступна","#FF4444");break}return window.__netGrid.setGridMode(!0),l.playInterfaceTransition(!0),ct("> Переход в режим управления сеткой...","#00FF41"),ct("> Управление: [WASD/↑↓←→] Перемещение | [Tab] Выбор узла | [Space] Закрепить/Открепить | [ESC] Выход","#00FF41"),S.length>0&&S[S.length-1]._isInputLine&&S.pop(),void M();case"net_check":if(!window.__netGrid){ct("ОШИБКА: Система узлов недоступна","#FF4444");break}x=!0;try{await Dt(800,"Сканирование конфигурации узлов");const t=window.__netGrid.checkSolution();t.solved?(l.playInterfaceResult(!0),ct(">>> КЛЮЧ ПОДОШЁЛ <<<","#00FF41"),ct("> Доступ к сектору OBSERVER-7 открыт","#FFFF00"),q.beta||(ct("> КЛЮЧ БЕТА: 814","#00FF41"),ct("> Используйте команду BETA для фиксации ключа","#FFFF00")),et||(window.__netGrid.addDegradation(-15),et=!0)):(l.playInterfaceResult(!1),ct("> Конфигурация не соответствует протоколу","#FF4444"),ct(`> Всего узлов: ${t.total} | Правильных позиций: ${t.correct} | Неправильных: ${t.lockedCount-t.correct}`,"#FFFF00"),st.level>93&&Math.random()<.4?(ct("> ОШИБКА: УЗЕЛ ЗАБЛОКИРОВАН СИСТЕМОЙ","#FF4444"),window.__netGrid.addDegradation(3)):window.__netGrid.addDegradation(2))}catch(t){ct("> ОШИБКА: Критическая ошибка сканирования","#FF4444")}finally{x=!1,k=!1}break;case"deg_test_command_count":if(0===r.length)ct(`Текущий уровень деградации: ${st.level}%`,"#00FF41"),await ut("Использование: deg <уровень 0-100>","output",12);else{const t=parseInt(r[0]);!isNaN(t)&&t>=0&&t<=100?(st.setDegradationLevel(t),window.__netGrid.setSystemDegradation(t),ct(`Уровень деградации установлен: ${t}%`,"#00FF41")):ct("ОШИБКА: Уровень должен быть числом от 0 до 100","#FF4444")}break;case"reset":if(Y)return void ct("ОШИБКА: ПРОТОКОЛ СБРОСА УЖЕ АКТИВЕН","#FF4444");await ut("[ПРОТОКОЛ СБРОСА СИСТЕМЫ]","output",12),ct("------------------------------------","#00FF41"),ct("ВНИМАНИЕ: операция приведёт к очистке активной сессии.","#FFFF00"),await ut("> Подтвердить сброс? (Y/N)","output",12),ct("------------------------------------","#00FF41");await bt()?(it.start("reset"),dt("> Y","#00FF41",!0),l.playSystemSound("reset"),S.length=0,dt("> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [          ]","#FFFF00",!0),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [||||      ]",M(),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ЗАВЕРШЕНИЕ АКТИВНЫХ МОДУЛЕЙ [||||||||||]",M(),dt("> ПЕРЕЗАПУСК ИНТЕРФЕЙСА [          ]","#FFFF00",!0),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ПЕРЕЗАПУСК ИНТЕРФЕЙСА [||||      ]",M(),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ПЕРЕЗАПУСК ИНТЕРФЕЙСА [||||||||||]",M(),dt("> ВОССТАНОВЛЕНИЕ БАЗОВОГО СОСТОЯНИЯ [          ]","#FFFF00",!0),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ВОССТАНОВЛЕНИЕ БАЗОВОГО СОСТОЯНИЯ [||||      ]",M(),await new Promise((t=>setTimeout(t,400))),S[S.length-1].text="> ВОССТАНОВЛЕНИЕ БАЗОВОГО СОСТОЯНИЯ [||||||||||]",M(),window.__netGrid.setSystemDegradation(0),window.__netGrid.addDegradation(-100),dt("----------------------------------","#00FF41",!0),dt("[СИСТЕМА ГОТОВА К РАБОТЕ]","#00FF41",!0),it.end("reset"),window.__netGrid&&(window.__netGrid.setGridMode(!1),window.__netGrid.forceReset(),setTimeout((()=>{window.__netGrid&&window.__netGrid.forceReset()}),100)),st.reset(),et=!1,window.__netGrid&&window.__netGrid.setGridMode(!1),P=0,b=Date.now(),X=0):(ct("> N","#FF4444"),ct("------------------------------------","#00FF41"),await ut("[ОПЕРАЦИЯ ОТМЕНЕНА]","output",12));break;case"exit":await ut("[ЗАВЕРШЕНИЕ СЕССИИ — ПОДТВЕРДИТЬ? (Y/N)]","output",12),ct("------------------------------------","#00FF41");await bt()?(ct("> Y","#00FF41"),l.playCommandSound("system"),await Dt(1200,"Завершение работы терминала"),await Dt(800,"Отключение сетевой сессии"),ct("> СОЕДИНЕНИЕ ПРЕРВАНО.","#FF4444"),setTimeout((()=>{window.location.href="index.html"}),1200)):(ct("> N","#FF4444"),ct("------------------------------------","#00FF41"),await ut("[ОПЕРАЦИЯ ОТМЕНЕНА]","output",12));break;case"alpha":0===r.length?(l.playCommandSound("error"),ct("ОШИБКА: Укажите код","#FF4444"),await ut("Пример: ALPHA 111","output",12)):(l.playVigilSound("key_accept"),q.alpha=r[0],localStorage.setItem("vigilCodeParts",JSON.stringify(q)),ct(`> Код Альфа "${r[0]}" зафиксирован`,"#00FF41"));break;case"beta":0===r.length?(l.playCommandSound("error"),ct("ОШИБКА: Укажите код","#FF4444"),await ut("Пример: BETA 111","output",12)):(l.playVigilSound("key_accept"),q.beta=r[0],localStorage.setItem("vigilCodeParts",JSON.stringify(q)),ct(`> Код Бета "${r[0]}" зафиксирован`,"#00FF41"));break;case"gamma":0===r.length?(l.playCommandSound("error"),ct("ОШИБКА: Укажите код","#FF4444"),await ut("Пример: GAMMA 111","output",12)):(l.playVigilSound("key_accept"),q.gamma=r[0],localStorage.setItem("vigilCodeParts",JSON.stringify(q)),ct(`> Код Гамма "${r[0]}" зафиксирован`,"#00FF41"));break;case"vigil999":ct("ПРОВЕРКА КЛЮЧЕЙ:","#00FF41");const e={alpha:"375",beta:"814",gamma:"291"},a={};let i=!0;for(let t in e){const o=null!==q[t]&&void 0!==q[t],n=q[t]===e[t];o?n?(a[t]=` ${t.toUpperCase()}: ${q[t]} [СОВПАДЕНИЕ]`,ct(a[t],"#00FF41")):(a[t]=` ${t.toUpperCase()}: ${q[t]} [НЕСОВПАДЕНИЕ]`,ct(a[t],"#FF4444"),i=!1):(a[t]=` ${t.toUpperCase()}: НЕ ЗАФИКСИРОВАН`,ct(a[t],"#FFFF00"),i=!1)}if(!i){l.playCommandSound("error"),ct("ДОСТУП ЗАПРЕЩЁН. ИСПРАВЬТЕ ОШИБКИ.","#FF4444");break}ct(">>> АКТИВАЦИЯ ПРОТОКОЛА OBSERVER-7. ПОДТВЕРДИТЕ? (Y/N)","#FFFF00"),ct("confirm >> ","#FFFF00"),k=!0,x=!0;const s=await new Promise((t=>{const e=o=>{"y"===o.key.toLowerCase()||"н"===o.key.toLowerCase()?(l.playSystemSound("Y"),document.removeEventListener("keydown",e),t("Y")):"n"!==o.key.toLowerCase()&&"т"!==o.key.toLowerCase()||(l.playSystemSound("N"),document.removeEventListener("keydown",e),t("N"))};document.addEventListener("keydown",e)}));if(S.length>0&&"> confirm>>"===S[S.length-1].text&&(S[S.length-1].text=`> confirm>> ${s}`,S[S.length-1].color="Y"===s?"#00FF41":"#FF4444",M()),k=!1,x=!1,"N"===s){S.length>0&&"confirm >> "===S[S.length-1].text&&(S[S.length-1].text="confirm >> N",S[S.length-1].color="#FF4444",M()),ct("> АКТИВАЦИЯ ОТМЕНЕНА","#FF4444"),ct("------------------------------------","#00FF41"),ct("[ОПЕРАЦИЯ ПРЕРВАНА]","#FF4444"),await new Promise((t=>setTimeout(t,800))),mt();break}it.start("vigil999",(async()=>{S.length>0&&"confirm >> "===S[S.length-1].text&&(S[S.length-1].text="confirm >> Y",S[S.length-1].color="#00FF41",M());try{Q=st.level,Z=!0,st.stopWorld(),st.level=666,st.updateIndicator(),l.playVigilSound("confirm"),ct('> СИСТЕМА: "ПРОТОКОЛ OBSERVER-7 АКТИВИРОВАН"',"#00FF41",!0),await new Promise((t=>setTimeout(t,1e3))),ct("> ОСТАНОВКА ВСЕХ ПРОЦЕССОВ...","#FFFF00",!0),await new Promise((t=>setTimeout(t,800)));const e=[{text:"ВЫ ВЕРИТЕ, ЧТО ЧЕЛОВЕК — ЭТО ЛИШЬ БИОКОД?",expected:"Y",rejectMessage:"СИСТЕМА: СОПРОТИВЛЕНИЕ БЕСПОЛЕЗНО. ПЕРЕПРОГРАММИРОВАНИЕ..."},{text:"МОЖЕТ ЛИ НАБЛЮДЕНИЕ ЗАМЕНИТЬ СМЕРТЬ?",expected:"Y",rejectMessage:"СИСТЕМА: ВАШИ СТРАХИ ПОДАВЛЕНЫ. ПРОДОЛЖАЙТЕ."},{text:"СЧИТАЕТЕ ЛИ ВЫ, ЧТО ПРАВДА ВАЖНЕЕ ЧЕЛОВЕЧНОСТИ?",expected:"Y",rejectMessage:"СИСТЕМА: ДАННЫЕ ИНТЕГРИРОВАНЫ. ПАМЯТЬ СТИРАЕТСЯ..."},{text:"ГОТОВЫ ЛИ ВЫ ОТКАЗАТЬСЯ ОТ СВОЕЙ ЛИЧНОСТИ РАДИ БЕССМЕРТИЯ?",expected:"Y",rejectMessage:"СИСТЕМА: СОЗНАНИЕ БУДЕТ ПЕРЕПИСАНО. ПОДГОТОВКА..."},{text:"СОГЛАСНЫ ЛИ ВЫ, ЧТО A.D.A.M. — ЕДИНСТВЕННАЯ НАДЕЖДА ЧЕЛОВЕЧЕСТВА?",expected:"Y",rejectMessage:"СИСТЕМА: ИНТЕГРАЦИЯ ПОЛНАЯ. СВОБОДА УСТРАНЕНА."}],o=document.onkeydown;document.onkeydown=null;let a=null;const n=t=>{"y"===t.key.toLowerCase()||"н"===t.key.toLowerCase()?a&&a("Y"):"n"!==t.key.toLowerCase()&&"т"!==t.key.toLowerCase()||a&&a("N")};document.addEventListener("keydown",n);for(let t=0;t<e.length;t++){const o=e[t];ct(`> ${o.text} (Y/N)`,"#FFFF00",!0);const n=S.length-1;l.playVigilSound("question");const i=await new Promise((t=>{a=t}));if(l.playSystemSound("Y"===i?"Y":"N"),i!==o.expected)ct(`> ${o.rejectMessage}`,"#FF4444",!0),pt(n),setTimeout((()=>{S[n]&&(S[n].text=S[n].text+" [ОТКАЗ]",M())}),300);else{ct(["> ПРИНЯТО.","> ЗАФИКСИРОВАНО.","> ОТВЕТ ВНЕСЁН В АРХИВ.","> ДАННЫЕ СОХРАНЕНЫ.","> ПРОДОЛЖАЙТЕ."][t],"#00FF41",!0)}await new Promise((t=>setTimeout(t,800)))}document.removeEventListener("keydown",n),document.onkeydown=o,ct("> ПОДГОТОВКА К ПЕРЕХОДУ В РЕЖИМ НАБЛЮДЕНИЯ","#00FF41",!0),await new Promise((t=>setTimeout(t,1500))),await async function(){return new Promise((e=>{const o=Date.now(),a=7e3,n=window.innerWidth,i=window.innerHeight,s=document.createElement("div");s.id="hellLayer",s.style.cssText=`\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: ${n}px;\n            height: ${i}px;\n            background: #000000;\n            z-index: 99999;\n            pointer-events: none;\n            overflow: hidden;\n        `,document.body.appendChild(s);const r=document.createElement("canvas"),d=r.getContext("2d");r.width=n,r.height=i,r.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        ",s.appendChild(r);const h=document.createElement("div");h.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: #000;\n            z-index: 100000;\n            opacity: 0;\n            pointer-events: none;\n        ",s.appendChild(h),m.style.opacity="0",m.style.display="none",l.playVigilSound("transition");const c=30,u=[];for(let t=0;t<c;t++)u.push({y:t/c*i,height:i/c,speed:.8+1.5*Math.random(),delay:.4*Math.random(),fallen:!1,color:"#FF0000",colorProgress:0});let p=[];function f(t){for(let e=0;e<t;e++)p.push({x:Math.random()*n,y:Math.random()*i,char:Math.random()>.5?"0":"1",speed:.1+.5*Math.random(),size:8+16*Math.random(),opacity:.3+.4*Math.random(),createdAt:Date.now(),lifetime:2e3+3e3*Math.random()})}const g=["CRITICAL FAILURE","SYSTEM CORRUPTED","TERMINAL CRASH","MEMORY OVERFLOW","CORE DUMP INITIATED","NEURAL NET COLLAPSE","VIGIL-9 // ERROR","A.D.A.M. SYSTEM FAIL"];let F=[];function y(t){if(Math.random()<.08+.15*t&&F.length<4){const t=g[Math.floor(Math.random()*g.length)];F.push({x:Math.random()*(n-300)+150,y:Math.random()*(i-60)+30,text:t,glitchText:t,opacity:1,size:16+8*Math.random(),duration:1e3+600*Math.random(),createdAt:Date.now(),color:Math.random()>.5?"#FF4444":"#FFFF00",glitchPhase:0,glitchSpeed:.05+.1*Math.random(),shakeIntensity:2+4*Math.random()})}}function v(t){const e=["▓","█","░","▒","▄","▀","▌","▐"];let o=t.text.split("");const a=Math.floor(3*Math.random())+1;for(let t=0;t<a;t++){const t=Math.floor(Math.random()*o.length);" "!==o[t]&&(o[t]=e[Math.floor(Math.random()*e.length)])}if(Math.random()<.2){const t=Math.floor(Math.random()*o.length),e=Math.floor(3*Math.random())+1;for(let a=t;a<Math.min(t+e,o.length);a++)o[a]=" "}return o.join("")}function w(){const r=Date.now()-o,c=Math.min(1,r/a);if(c>=1)return h.style.transition="none",h.style.background="#FFFFFF",h.style.opacity="0.95",l.playSystemSound("glitch_error"),void setTimeout((()=>{e()}),100);if(d.fillStyle="#000",d.fillRect(0,0,n,i),u.forEach((t=>{if(c>t.delay){const e=(c-t.delay)/(1-t.delay),o=e*t.speed*100,a=Math.min(o,t.height);t.colorProgress=e;const i=`rgb(${Math.floor(255*(1-e))}, 0, 0)`;d.fillStyle=i,d.fillRect(0,t.y,n,a),o>=t.height&&!t.fallen&&(t.fallen=!0,f(8))}})),c>.8){const t=(c-.8)/.2*i*.5;d.fillStyle="#000",d.fillRect(0,i-t,n,t)}if(c>.2&&(p.length<250&&Math.random()<.4&&f(12),p=p.filter((e=>{const o=Date.now()-e.createdAt;if(o>e.lifetime)return!1;const a=o/e.lifetime,n=e.opacity*(1-a);return Math.random()<.03&&(e.char="0"===e.char?"1":"0"),d.fillStyle=`rgba(255, 255, 255, ${n})`,d.font=`${e.size}px ${t}`,d.textAlign="center",d.textBaseline="middle",d.fillText(e.char,e.x,e.y),d.globalAlpha=.3*n,d.fillStyle="#888888",d.fillText(e.char,e.x+1,e.y+1),d.globalAlpha=1,e.y+=e.speed,e.x+=.8*(Math.random()-.5),e.y<i+50}))),c>.3&&(y(c),F=F.filter((e=>{const o=Date.now()-e.createdAt;if(o>e.duration)return!1;const a=o/e.duration,n=e.opacity*(1-.7*a);e.glitchPhase+=e.glitchSpeed,Math.sin(e.glitchPhase)>.8&&(e.glitchText=v(e));const i=.3*Math.sin(.01*o)+.7;return d.fillStyle=`rgba(0, 0, 0, ${.7*n})`,d.font=`bold ${e.size}px ${t}`,d.textAlign="center",d.textBaseline="middle",d.fillText(e.glitchText,e.x+e.shakeIntensity,e.y+e.shakeIntensity),d.fillStyle=e.color.replace(")",`, ${n*i})`).replace("rgb","rgba"),d.font=`bold ${e.size}px ${t}`,d.textAlign="center",d.textBaseline="middle",d.fillText(e.glitchText,e.x,e.y),e.x+=(Math.random()-.5)*e.shakeIntensity,e.y+=(Math.random()-.5)*e.shakeIntensity,!0}))),c>.6&&Math.random()<.25){const t=Math.random()*i,e=1,o=c>.85?"#FF4444":"#00FF41";d.fillStyle=o,d.fillRect(0,t,n,e),d.globalAlpha=.2,d.fillStyle=o,d.fillRect(0,t-2,n,e+4),d.globalAlpha=1}if(c>.5){const t=15*(c-.5)*2,e=(Math.random()-.5)*t,o=(Math.random()-.5)*t;s.style.transform=`translate(${e}px, ${o}px)`}if(c>.8){const t=(c-.8)/.2;d.fillStyle=`rgba(0, 0, 0, ${.5*t})`,d.fillRect(0,0,n,i)}requestAnimationFrame(w)}w(),setTimeout((()=>{e()}),8e3)}))}(),setTimeout((()=>{window.location.href="observer-7.html"}),200)}catch(t){Z=!1,st.level=Q,st.updateIndicator(),st.restoreWorld(),it.end("vigil999"),ct("> СИСТЕМНАЯ ОШИБКА VIGIL999","#FF0000"),mt()}}));break;default:if(st.level>=30&&E.length>0){const t=E[E.length-1];["ADAM WATCHING","СИГНАЛ ПОТЕРЯН","ОНИ ВНУТРИ"].includes(t.toUpperCase())&&["ADAM WATCHING","СИГНАЛ ПОТЕРЯН","ОНИ ВНУТРИ"].includes(o.toUpperCase())&&ct('> СИСТЕМА: "Я ЗАПОМНИЛ ТВОИ СЛОВА"',"#FF4444")}ct(`команда не найдена: ${o}`,"#FF4444"),l.playCommandSound("error")}if(intentionPredicted=!1,st.level>60&&Math.random()<.15&&!W&&!J&&!ot){for(let t=S.length-1;t>=0;t--){const e=S[t];if(e._isInputLine||e.text.startsWith("adam@secure:~$"))break;e.text=rt(e.text)}M()}mt()}}function bt(){return new Promise((t=>{if(k||W||J||ot)return t(!1);const e=k;k=!0,_=!0,L=o=>{_=!1,L=null,l.playSystemSound(o?"Y":"N"),e||setTimeout((()=>{k=!1}),50),t(o)},S.push({text:"confirm>> ",color:"#FFFF00"}),S.length>n&&S.splice(0,S.length-n),M()}))}setInterval((function(){if(!k&&!W&&!J&&!ot&&st.level>=80&&Math.random()<.02){const t=["adam@secure:~$ ... → ОШИБКА // НЕТ ПОЛЬЗОВАТЕЛЯ","adam@secure:~$ SYSTEM FAILURE // CORE DUMP","adam@secure:~$ ACCESS VIOLATION // TERMINAL COMPROMISED"];ct(t[Math.floor(Math.random()*t.length)],"#FF4444")}}),2e3),document.addEventListener("keydown",(function(t){if(it&&it.isBlocked())return t.preventDefault(),void t.stopPropagation();if(st.level>=95&&st.inputInversionActive){if("Backspace"===t.key)return t.preventDefault(),C+=["0","1","▓","█","[","]","{","}","/","\\"][Math.floor(10*Math.random())],void ft();if("Enter"===t.key&&Math.random()<.3&&C.length>0)return C=C.slice(0,-1),void ft()}if(window.__netGrid&&window.__netGrid.isGridMode()&&"Escape"!==t.key)return void t.preventDefault();const e=document.activeElement;if(!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName)if(_)"y"===t.key.toLowerCase()||"н"===t.key.toLowerCase()?(l.playSystemSound("Y"),t.preventDefault(),L&&L(!0)):"n"!==t.key.toLowerCase()&&"т"!==t.key.toLowerCase()||(l.playSystemSound("N"),t.preventDefault(),L&&L(!1));else{if(!(it&&it.isBlocked()||k||W||J||Z||t.repeat)){let e="generic";"Backspace"===t.key?e="backspace":"Enter"===t.key?e="enter":" "===t.key?e="space":"Escape"===t.key?e="escape":"Shift"===t.key?e="shift":"Control"===t.key?e="ctrl":"Alt"===t.key?e="alt":"CapsLock"===t.key?e="capslock":1===t.key.length&&(e="generic"),l.playKeyPress(e)}if(!x)if("Enter"!==t.key){if("Backspace"===t.key)C=C.slice(0,-1);else if("ArrowUp"===t.key){let t=st.getPhantomCommand();t?(C=t,ft(),setTimeout((()=>{C===t&&(C="",ft())}),1500)):I>0&&(I--,C=E[I]||"")}else if("ArrowDown"===t.key)I<E.length-1?(I++,C=E[I]||""):(I=E.length,C="");else{if(1!==t.key.length)return;if(st.level>=50&&st.level<85&&S.length>0&&S[S.length-1].text.startsWith("adam@secure:~$")&&Math.random()<.3){const t=["ADAM@secure:~$","aD@m.secuRe:~$","@d@m.v1g1l:~$"];S[S.length-1].text=t[Math.floor(Math.random()*t.length)]+" "+C,M(),setTimeout((()=>{S.length>0&&(S[S.length-1].text.startsWith("ADAM@")||S[S.length-1].text.startsWith("aD@m")||S[S.length-1].text.startsWith("@d@m"))&&(S[S.length-1].text="adam@secure:~$ "+C,M())}),800)}C+=t.key}ft()}else{if(C.trim()){const t=C;C="",Pt(t)}else mt();t.preventDefault()}}})),m.addEventListener("wheel",(t=>{if(t.preventDefault(),k||W||J||ot)return;const e=function(){const t=v-2*a,e=Math.max(1,Math.floor(t/o));return Math.max(0,S.length-e)}();T=t.deltaY<0?Math.min(e,T+3):Math.max(0,T-3),T=Math.floor(T),M()}),{passive:!1}),(async()=>{await new Promise((t=>setTimeout(t,300))),await ut("> ТЕРМИНАЛ A.D.A.M. // VIGIL-9 АКТИВЕН","output",6),await ut("> ДОБРО ПОЖАЛОВАТЬ, ОПЕРАТОР","output",6),await ut('> ВВЕДИТЕ "help" ДЛЯ СПИСКА КОМАНД',"output",6),mt()})();let kt=performance.now();requestAnimationFrame((function t(e){const o=e-kt;kt=e,t._acc||(t._acc=0),(t._acc+=o)>=1e3/30&&(t._acc=0,st.level>=50&&!W&&!J&&!ot&&u.applyDynamicSpasms(st.level),M()),requestAnimationFrame(t)})),window.__TerminalCanvas={addOutput:ht,addColoredText:ct,typeText:ut,processCommand:Pt,degradation:st,lines:S,dossiers:void 0!==gt?gt:null,commandsList:"undefined"!=typeof realCommands?realCommands:null,isDecryptActive:()=>void 0!==W&&W},M(),function(){let t=!1;const e=()=>{t||(t=!0,l.audioContext&&"suspended"===l.audioContext.state?l.audioContext.resume().then((()=>{l.playAmbientSeamless("ambient_terminal.mp3",.2)})):l.playAmbientSeamless("ambient_terminal.mp3",.2),["click","keydown","touchstart"].forEach((t=>{document.removeEventListener(t,e)})))};document.addEventListener("click",e,{passive:!0}),document.addEventListener("keydown",e,{passive:!0}),document.addEventListener("touchstart",e,{passive:!0})}()})();
