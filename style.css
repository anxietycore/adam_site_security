/* === BASE RESET === */
* { box-sizing: border-box; margin: 0; padding: 0; }
html,body { height: 100%; }
body {
    background: #050505;
    color: rgb(100,255,130); /* грязный фосфор */
    font-family: "Courier New", monospace;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    cursor: default;
}

/* === GLOBAL NOISE / NEURAL LAYER === */
.noise { position: fixed; inset: 0; pointer-events: none; z-index: 10; }
.neural-layer {
    position: absolute; inset: 0;
    background:
        radial-gradient(circle at 20% 30%, rgba(100,255,130,0.02) 0 2px, transparent 3px),
        radial-gradient(circle at 70% 70%, rgba(100,255,130,0.015) 0 2px, transparent 3px);
    mix-blend-mode: screen;
    opacity: 0.25;
    animation: neural-breath 15s ease-in-out infinite;
    filter: blur(0.6px);
}
@keyframes neural-breath {
    0%,100% { transform: scale(1); opacity: 0.22; }
    50% { transform: scale(1.02); opacity: 0.45; }
}

/* Echo memory ghosts */
.neural-echo {
    position:absolute; inset: 0;
    background-image: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.35) 100%);
    opacity: 0.05;
    pointer-events: none;
}
.vhs-grain {
    position:absolute; inset:0;
    background-image: repeating-linear-gradient(180deg, rgba(255,255,255,0.002) 0 1px, transparent 1px 2px);
    opacity: 0.9;
    mix-blend-mode: overlay;
    pointer-events: none;
}
.vhs-lines {
    position:absolute; inset:0;
    background:
      linear-gradient(transparent 92%, rgba(0,0,0,0.02) 92% 100%);
    opacity: 0.12;
    pointer-events: none;
}
.screen-scratches {
    position:absolute; inset:0;
    background-image:
      linear-gradient(90deg, rgba(255,255,255,0.01) 0 1px, transparent 1px 100%),
      linear-gradient(0deg, rgba(255,255,255,0.01) 0 1px, transparent 1px 100%);
    mix-blend-mode: overlay;
    opacity: 0.05;
}

/* Anomaly flares */
.anomaly-1, .anomaly-2 {
    position: absolute; width: 6px; height:6px; border-radius:50%;
    background: rgba(100,255,130,0.9); box-shadow: 0 0 10px rgba(100,255,130,0.15);
    opacity: 0; animation: anomaly 36s linear infinite;
}
.anomaly-1 { top: 18%; left: 12%; animation-delay: 0s; }
.anomaly-2 { top: 72%; left: 82%; animation-delay: 12s; }
@keyframes anomaly {
    0%,96% { opacity: 0; transform: scale(0) rotate(0deg); }
    97% { opacity: 0.8; transform: scale(1.3) rotate(180deg); }
    100% { opacity: 0; transform: scale(0) rotate(360deg); }
}

/* === SCREENS & UI FRAMES === */
.screen {
    position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
    z-index: 20; background: rgba(0,0,0,0.85); transition: opacity .5s ease;
}
.screen.hidden { display: none; }

.start-message { text-align:center; padding: 30px; border: 1px solid rgba(100,255,130,0.08); background: rgba(0,0,0,0.5); box-shadow: 0 0 30px rgba(0,0,0,0.6); width: 720px; max-width: 90%; }
.logo pre { color: rgba(100,255,130,0.9); font-size: 12px; letter-spacing: 1px; }
.logo.small pre { font-size: 10px; margin-bottom: 6px; }

.muted { color: rgba(180,220,180,0.9); margin-top: 8px; font-size: 14px; }

/* Buttons */
.btn {
    display:inline-block; margin-top: 18px; padding: 12px 22px; background: transparent;
    border: 1px solid rgba(100,255,130,0.8); color: rgb(100,255,130); cursor: pointer; font-family: monospace;
}
.btn:hover { background: rgba(100,255,130,0.06); }

/* Login form */
.login-form {
    border: 1px solid rgba(100,255,130,0.08); padding: 26px; width: 420px; text-align:left;
    background: rgba(0,0,0,0.6);
}
.login-prompt { font-size: 18px; margin-bottom: 12px; color: rgba(200,230,200,0.95); text-transform: uppercase; }
.input-group { margin: 10px 0; }
.input-group label { display:block; font-size: 13px; margin-bottom:6px; color: rgba(200,230,200,0.7); }
.input-group input {
    width:100%; padding:8px 10px; background: #020202; border: 1px solid rgba(100,255,130,0.28);
    color: rgb(100,255,130); font-family: monospace;
}
.input-group input:focus { box-shadow: 0 0 8px rgba(100,255,130,0.08); outline: none; }

/* Visit note */
.visit-note { margin-top: 12px; color: rgba(200,200,120,0.6); font-size: 13px; }

/* === TERMINAL ELEMENTS (shared styles for terminal.html) === */
#terminal {
    padding: 18px; height: 100vh; overflow-y: auto; background: transparent; width: 100%;
    color: rgb(220,220,220); font-family: monospace; letter-spacing: -0.5px;
}
.output { margin: 6px 0; white-space: pre-wrap; line-height: 1.35; color: rgba(200,200,200,0.95); }
.command { color: #FFFFFF; }
.prompt { color: rgb(100,255,130); }
.cmd { color: #ddd; }
.cursor { display:inline-block; width: 10px; margin-left:4px; background: rgb(100,255,130); animation: cursor-breathe 1s infinite; }
@keyframes cursor-breathe { 0% { opacity: 1 } 50% { opacity: 0 } 100% { opacity: 1 } }

/* Degradation indicator (right top) */
#degradation-indicator {
    position: fixed; top: 12px; right: 12px; z-index: 60;
    width: 220px; background: rgba(0,0,0,0.55); border: 1px solid rgba(100,255,130,0.06);
    padding: 8px; color: rgba(200,200,200,0.9); font-family: monospace; font-size: 13px; border-radius: 4px;
    box-shadow: 0 0 18px rgba(0,0,0,0.6);
}
#degradation-bar {
    height: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(100,255,130,0.06); margin-top:8px; overflow:hidden;
}
#degradation-bar > i {
    display:block; height:100%; width:0%; background: linear-gradient(90deg, rgba(100,255,130,0.9), rgba(0,180,60,0.6));
    box-shadow: 0 0 8px rgba(100,255,130,0.08) inset;
    transition: width 400ms linear, background 300ms linear;
}
#degradation-hint { margin-top:6px; color: rgba(240,220,150,0.9); font-size:12px; display:none; }

/* Visual levels (applied to body as classes level-l1..l5) */
body.level-l1 { filter: none; --glow: 0.03; }
body.level-l2 { --glow: 0.06; }
body.level-l3 { --glow: 0.12; }
body.level-l4 { --glow: 0.22; }
body.level-l5 { --glow: 0.4; }

/* Light breathing of UI tied to degradation */
body.level-l2 .neural-layer { animation-duration: 13s; }
body.level-l3 .neural-layer { animation-duration: 10s; opacity: 0.45; }
body.level-l4 .neural-layer { animation-duration: 8s; opacity: 0.6; filter: blur(0.9px); }
body.level-l5 .neural-layer { animation-duration: 6s; opacity: 0.85; filter: blur(1.1px); }

/* Slight container vibration when higher degradation */
@keyframes container-vibe { 0%{ transform: translate(0,0) } 50%{ transform: translate(1px,-1px) } 100%{ transform: translate(0,0) } }
body.level-l4 #terminal, body.level-l5 #terminal { animation: container-vibe 180ms ease-in-out; }

/* RGB shift overlay (simulated with pseudo element in terminal page) */
/* We'll add classes and a pseudo overlay in terminal.html to implement exact shift. */

/* Ghost text & parasitic reflections */
.ghost-line { position: relative; opacity: 0.12; transform: translateY(2px); text-shadow: 0 0 6px rgba(0,0,0,0.6); font-style: italic; }

/* Inversion flash (triggered by JS via .flash-invert on body) */
body.flash-invert { animation: invertFlash 160ms ease-in-out; }
@keyframes invertFlash {
    0% { filter: invert(0) }
    50% { filter: invert(1) }
    100% { filter: invert(0) }
}

/* Text decay characters (used by JS to replace characters) */
.decay { color: rgba(180,180,180,0.9); font-weight: bold; }

/* Utility */
.hidden { display: none !important; }
.error { color: #ff5555; }

/* Small responsive tweaks */
@media (max-width:720px) {
    .login-form { width: 94%; }
    #degradation-indicator { width: 160px; right: 8px; top: 8px; font-size: 12px; }
}
